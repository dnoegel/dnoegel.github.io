[{"categories":null,"content":"Developing Arduino boards is actually easier than one might think. You plug the development board onto your computer’s USB, fire up Arduino IDE, and with just a few key strokes and clicks you can upload a first sketch to your development board. But what do you do if you just finished a more complex project and your development board is hard to reach in a door bell, water tank or robot you built? ","date":"2022-11-01","objectID":"/posts/2022-11-01-arduino-auto-update/:0:0","tags":null,"title":"Update ESP32 over the air","uri":"/posts/2022-11-01-arduino-auto-update/"},{"categories":null,"content":"Arduino OTA Arduino also supports so-called “over the air” (OTA) updates. These allow you to flash a new sketch to your development board via Wifi. For this you need the library ArduinoOTA and a Wifi-enabled development board. For the ESP32 board - which I am using - this dependency is already in the development libraries of that board. First upload needs to happen via Serial After that Arduino IDE will find the network device automatically For the first upload the password needs to be entered Upload progress ","date":"2022-11-01","objectID":"/posts/2022-11-01-arduino-auto-update/:1:0","tags":null,"title":"Update ESP32 over the air","uri":"/posts/2022-11-01-arduino-auto-update/"},{"categories":null,"content":"The Sketch In order to make basically every Arduino Sketch OTA compatible, you just need to implement the setupWebUpdater function shown below and call it from your setup function. Furthermore, your need to make sure to call ArduinoOTA.handle() in every execution of the loop function. As we don’t want everyone in our network to be able to easily flash new updates, we will define a password for the OTA updates: The password is provided as an MD5 hash (please remember: MD5 is not a good choice for hashing passwords). You can generate your hash easily by running e.g. echo -n \"MySecretPassword\"|md5 in your terminal. #include \u003cWiFi.h\u003e #include \u003cESPmDNS.h\u003e #include \u003cWiFiUdp.h\u003e #include \u003cArduinoOTA.h\u003e #define WIFI_SSID \"YOUR-WIFI-SSID\" #define WIFI_PASSWORD \"YOUR-WIFI-PASSWORD\" #define OTA_HASH \"7315a012ecad1059a3634f8be1347846\" // echo -n \"MySecretPassword\"|md5 void setup() { Serial.begin(9600); WiFi.setHostname(\"OTAExample\"); WiFi.begin(WIFI_SSID, WIFI_PASSWORD); Serial.print(\"Connecting to \"); Serial.println(WIFI_SSID); while (WiFi.status() != WL_CONNECTED) { delay(500); Serial.print(\".\"); } Serial.println(\"\"); Serial.println(\"WiFi connected. IP address: \"); Serial.println(WiFi.localIP()); setupWebUpdater(); } void loop() { // your logic ArduinoOTA.handle(); delay(250); } void setupWebUpdater(void) { ArduinoOTA.setHostname(\"OTAExample\"); ArduinoOTA.setPasswordHash(OTA_HASH); ArduinoOTA .onStart([]() { String type; if (ArduinoOTA.getCommand() == U_FLASH) type = \"sketch\"; else // U_SPIFFS type = \"filesystem\"; // NOTE: if updating SPIFFS this would be the place to unmount SPIFFS using SPIFFS.end() Serial.println(\"Start updating \" + type); }) .onEnd([]() { Serial.println(\"\\nEnd\"); }) .onProgress([](unsigned int progress, unsigned int total) { Serial.printf(\"Progress: %u%%\\r\", (progress / (total / 100))); }) .onError([](ota_error_t error) { Serial.printf(\"Error[%u]: \", error); if (error == OTA_AUTH_ERROR) Serial.println(\"Auth Failed\"); else if (error == OTA_BEGIN_ERROR) Serial.println(\"Begin Failed\"); else if (error == OTA_CONNECT_ERROR) Serial.println(\"Connect Failed\"); else if (error == OTA_RECEIVE_ERROR) Serial.println(\"Receive Failed\"); else if (error == OTA_END_ERROR) Serial.println(\"End Failed\"); }); ArduinoOTA.begin(); } ","date":"2022-11-01","objectID":"/posts/2022-11-01-arduino-auto-update/:2:0","tags":null,"title":"Update ESP32 over the air","uri":"/posts/2022-11-01-arduino-auto-update/"},{"categories":null,"content":"Summary I like this approach quite a lot: It doesn’t add too much boilerplate to the sketch and therefore can become a default part of all your projects. There is even a “OTA Web Updater” example in the “ArduinoOTA” package - but that approach adds a lot of clutter and is less automated as it cannot be triggered directly from the ArduinoIDE. ","date":"2022-11-01","objectID":"/posts/2022-11-01-arduino-auto-update/:3:0","tags":null,"title":"Update ESP32 over the air","uri":"/posts/2022-11-01-arduino-auto-update/"},{"categories":null,"content":"Die Frage Eignet sich mein Altbau eigentlich für eine Wärmepumpe hat sich vermutlich fast jeder Altbaubesitzer schon gestellt. Im Netz finden sich allerlei Horrorgeschichten von elektrischen Heizpatronen und der angeblichen Notwendigkeit von Fußbodenheizungen. Es gibt zum Glück Möglichkeiten, das Ganze näherungsweise vorab zu bestimmen. Die wollen wir uns im Folgenden anschauen. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizung/:0:0","tags":null,"title":"Heizlastberechnung - Teil 3: Eignen sich meine Heizkörper für eine Wärmepumpe?","uri":"/posts/2022-10-29-heizung/"},{"categories":null,"content":"Mehr zu dieser Reihe In diesem dritten Teil meiner Reihe “Heizlastberechnung” geht es um die Berechnung der Leistung von Heizkörpern - und die Frage, ob die Heizkörper ausreichend dimensioniert sind. Hier geht es zu den anderen Teilen. Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermitteln Heizlastberechnung - Teil 3: Eignen sich meine Heizkörper für eine Wärmepumpe? ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizung/:1:0","tags":null,"title":"Heizlastberechnung - Teil 3: Eignen sich meine Heizkörper für eine Wärmepumpe?","uri":"/posts/2022-10-29-heizung/"},{"categories":null,"content":"Eignet sich mein Haus für eine Wärmepumpe? Direkt vorweg: Nein, man benötigt nicht zwingend Fußbodenheizungen und ja, auch Altbauten kann man mit Wärmepumpen betreiben ohne sich in den finanziellen Ruin zu stürzen. Bestimmen lässt sich das über die sogenannte “Jahresarbeitszahl” (JAZ): Diese gibt an, wieviel kWh Wärmeenergie je investierter Kilowattstunde Strom die Wärmepumpe zur Verfügung stellt. Teilen wir den Heizwärmebedarf des Hauses durch die JAZ, wissen wir, wie viel Strom die Wärmepumpe benötigt. Hier einige Beispiele: Szenario 2020 Heizwärmebedarf 16.000kWh Stromkosten: 0,26€/kWh Gaskosten: 0,06€/kWh JAZ Strombedarf WP Kosten Gasheizung/Jahr Kosten Strom/Jahr 3 5.333 960€ 1.386€ 3,5 4.571 960€ 1.188€ 4 4.000 960€ 1.040€ 4,5 3.555 960€ 924€ Szenario 2022 Heizwärmebedarf 16.000kWh Stromkosten: 0,68€/kWh Gaskosten: 0,23€/kWh JAZ Strombedarf WP Kosten Gasheizung/Jahr Kosten Strom/Jahr 3 5.333 3.680€ 3.626€ 3,5 4.571 3.680€ 3.108€ 4 4.000 3.680€ 2.720€ 4,5 3.555 3.680€ 2.417€ Man sieht: Bei den günstigen Gaspreisen der Vorjahre waren schon gute Jahresarbeitszahlen von 4 und besser nötig, um mit der Wärmepumpe bei den Gaspreisen gleichzuziehen - und das bei höheren Anschaffungskosten. Bei den aktuellen Gas- und Strompreisen sieht die Rechnung schon anders aus: Schon mit einer JAZ von 3 zieht die Wärmepumpe bei den laufenden Kosten etwa gleich und überholt die Gasheizung sogar. Nun gibt es im Jahr 2022 (und darüber hinaus) neben den reinen Energiekosten sicher noch andere gute Gründe, in eine Wärmepumpe zu investieren: Versorgungssicherheit, Preisentwicklung, ökologische Erwägungen… wir verstehen “Eignung” hier erstmal eher wirtschaftlich. Das Problem bei diesen ganzen Gedankenspielen: Die Jahresarbeitszahl kennt man erst, wenn die Wärmepumpe schon ein Jahr im Betrieb ist. Und Laborwerte wie der sagenumwobene (S)COP haben generell wenig Aussagekraft - noch weniger im Altbau. Um nun dennoch auf eine möglichst hohe JAZ spekulieren zu können, muss der Altbau einige Grundlagen erfüllen: Möglichst geringe Heizlast, d.h. geringer Wärmebedarf je m² Den Vorlauftemperaturen der Heizung Der Heizlast haben wir uns in Teil 1 dieser Reihe: Heizlast eines Raumes und Hauses ermitteln ausgiebig gewidmet. Hier geht es nun um die Vorlauftemperaturen. Grob gesagt: Je niedriger die Vorlauftemperatur der Heizung, desto weniger Arbeit muss die Wärmepumpe leisten, um diese zu erreichen, desto besser die JAZ, desto geringer die Kosten. Das ist auch der Grund, warum alle Welt Fußbodenheizungen und Wärmepumpen miteinander kombiniert: Fußbodenheizungen benötigen nur um die 30°C Vorlauftemperatur - alte Heizungen sind oftmals auf 75°C eingestellt. Ein gigantischer Unterschied für die Effizient der Wärmepumpe. Wir widmen uns hier also der Frage: Kann ich die Vorlauftemperatur meiner Heizung reduzieren - ohne dass die Bude kalt bleibt? Im Bild zu sehen: In fast allen Räumen ist die Leistung auch bei einer Vorlauftemperatur von 55°C ausreichend - und in fast keinem Raum bei einer Vorlauftemperatur von 45°C. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizung/:2:0","tags":null,"title":"Heizlastberechnung - Teil 3: Eignen sich meine Heizkörper für eine Wärmepumpe?","uri":"/posts/2022-10-29-heizung/"},{"categories":null,"content":"Messen über Reduzierung der Vorlauftemperatur Die Variante mit der wohl höchsten Aussagekraft: Die Vorlauftemperatur des bestehenden Heizkessels wird auf 55°C runterreguliert - nach einem knackigen Winter wissen wir genau, ob die Heizkörper damit in den Räumen weiterhin wohlige Wärme bereitstellen konnten. Die Nachteile dieser Variante: Zeitintensiv: Idealerweise eine Heizperiode, mindestens jedoch einige knackig kalte Tage um die Normauslegungstemperatur herum (beispielsweise -9°C). Kein ad hoc Ersatz: Ist der Heizkessel defekt, hat man mit dieser Variante keine Chance mehr zu ermitteln, ob die Vorlauftemperaturen ausreichen Der Vorlauf der Heizung muss umgestellt werden. Abhängig vom Modell kann dies mit mehr oder weniger Aufwand (Handbuch besorgen, Eigenwillige Tastensteuerung meistern) verbunden sein Gerade bei alten Anlagen mit schlecht eingestelltem hydraulischem Abgleichen, schlecht gedämmten Rohren und alten Zirkulationspumpen bleiben bei dieser Variante möglicherweise naheliegende Optimierungspotenziale unberücksichtigt. Die Vorteile: Wenn selbst im tiefsten Winter der Wohnbereich warm ist und selbst die Handtuchheizung im Bad noch ihr Werk verrichtet hat man einen Etwaige Effizienz- und Wärmeverluste der Heizanlage sind bereits berücksichtigt ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizung/:2:1","tags":null,"title":"Heizlastberechnung - Teil 3: Eignen sich meine Heizkörper für eine Wärmepumpe?","uri":"/posts/2022-10-29-heizung/"},{"categories":null,"content":"Heizlastberechnung \u0026 Heizkörperleistung Plattenheizkörper vom Typ 22 Zwei Konvektionsbleche zwischen zwei Platten in einem Heizkörper Typ 22 Drei Konvektionsbleche zwischen drei Platten in einem Heizkörper Typ 33 Die zweite Methode führt über die Heizlastberechnung: Im Rahmen dieser haben wir bereits die Heizlast jedes Raumes einzelnd berechnet; unser Beispiel-Raum mit 23m² hat beispielsweise eine Heizlast von 1049W. Der vorhandene Heizkörper sollte nun mindestens diese Leistung bereitstellen können - für eine Wärmepumpe bei 55°C Vorlauf oder weniger. Ich gehe im Folgenden von sogenannten Plattenheizkörpern aus: Noch ältere Röhrenheizkörper sind in der Regel nicht effizient bei niedrigeren Vorlauftemperaturen zu betreiben. Die Leistung eines Heizkörpers wird in der Regel bestimmt vom Heizkörpertyp, sowie seiner Höhe und Breite. Bei Plattenheizkörpern werden folgende Typen unterschieden: Typ 11: Eine Platte, ein Konvektionsblech Typ 20: Zwei Platten, kein Konvektionsblech Typ 21: Zwei Platten, ein Konvektionsblech Typ 22: Zwei Platten, zwei Konvektionsbleche Typ 30: Drei Platten, kein Konvektionsblech Typ 33: Drei Platten, drei Konvektionsbleche Mit einem Blick oben in den Heizkörper lässt sich also bestimmen, um welchen Typ es sich handelt. Werden nun noch Breite und Höhe ausgemessen, haben wir alle Informationen, die zur Berechnung der Wärmeleistung benötigt werden. Dazu gibt es entsprechende Tabellen im Netz, die konsultiert werden können, beispielsweise diese vom Großhandel für Reha und Haustechnik (Tabelle 1) oder diese Übersicht für Bruderus Heizkörper (Tabelle 2). In unserem Beispiel-Wohnzimmer gibt es einen Heizkörper Typ 33 mit einer Breite von 1600mm und einer Höhe von 600mm. Gemäß den beiden zuvor verlinkten Übersichten hat einer dieser Heizkörper folgende Leistungserte: Vorlauf/Rücklauf Wert lt. Tabelle 1 Wert lt. Tabelle 2 55°C/45°C 2021W 1891W 70°C/55°C 3231W 3000W Die Abweichung der Werte liegt nur bei etwa 7%. In allen Fällen liegt die Wärmeleistung des Heizkörpers über den nötigen 1049W Heizlast des Raumes. Das ist in Altbauten durchaus häufig anzutreffen, da die Heizkörper früher oftmals eher nach optischen Gesichtspunkten (“passt unter das Fenster”) ausgewählt wurden und daher häufig überdimensioniert sind. Führen wir diese Analyse für jeden Raum durch, kennen wir die Heizlast des Raumes - und die Wärmeleistung der Heizkörper. Ist die Wärmeleistung des Heizkörpers größer als die Heizlast, wird es in diesem Raum voraussichtlich zu keinen Problemen bei der Reduzierung der Vorlauftemperaturen kommen. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizung/:2:2","tags":null,"title":"Heizlastberechnung - Teil 3: Eignen sich meine Heizkörper für eine Wärmepumpe?","uri":"/posts/2022-10-29-heizung/"},{"categories":null,"content":"Exkurs: Wärmeleistung umrechnen Die Wärmeleistung der Heizkörper ist standardisiert für bestimmte Szenarien: In der Regel sind die Werte für 20°C Raumtemperatur angegeben - und für bestimmte Vorlauf- und Rücklauftemperaturen. Es ist aber auch möglich, eine bekannte Wärmeleistung (bspw. 70°C Vorlauf, 55°C Rücklauf, 20°C Raumtemperatur) eines Heizkörpers auf ein Wunschszenario umzurechnen, beispielsweise auf 45°C Vorlauf, 35°C Rücklauf und 22°C Raumtemperatur. So lässt sich auch überschlagen, ob die Vorlauftemperatur noch weiter reduziert werden kann. Leistung = normLeistung * ((((systemVorlauf - systemRuecklauf) / Log((systemVorlauf - systemTemperatur) / (systemRuecklauf - systemTemperatur))) / ((normVorlauf - normRuecklauf) / Log((normVorlauf - normTemperatur) / (normRuecklauf - normTemperatur)))) ^ hkExp) etwas augenfreundlicher: Mit dieser Formel lässt sich die Wärmeleistung eines Heizkörpers von der Normvorgabe auf eine andere Zielvorgabe umrechnen. Dabei stehen die Platzhalter für folgende Angaben: systemVorlauf: Wunsch-Vorlauf systemRuecklauf: Wunsch-Rücklauf systemTemperatur: Wunsch-Raumtemperatur normVorlauf: Vorlauf gemäß Herstellerangabe normRuecklauf: Rücklauf gemäß Herstellerangabe normTemperatur: Raumtemperatur gemäß Herstellerangabe normLeistung: Leistung gemäß Herstellerangabe UmrechnungHeizkoerper: Ergebnis der Berechnung hkExp: Heizkörperexponent, hier: 1,3 für Plattenheizkörper Im folgenden Beispiel soll die Formel angewandt werden: Die Leistung des Heizkörpers von oben (3000W Leistung bei 70°C Vorlauf, 55°C Rücklauf, 20°C Raumtemperatur) soll für 45°C Vorlauf und 35°C bei der gleichen Raumtemperatur berechnet werden - vielleicht können wir die Vorlauftemperatur ja noch weiter reduzieren? Bei 45°C Vorlauf liefert unser Heizkörper nur noch 1110W Leistung Laut Berechnung würde die Heizleistung des Heizkörpers also sogar bei nur 45°C Vorlauf noch ausreichen um die Heizlast von 1049W zu decken. Aber gebt euch keinen Illusionen hin: Das Beispiel ist fiktiv - dass der Vorlauf noch deutlich unter 50°C gesenkt werden kann dürfte für Altbauten mit Plattenheizkörpern eher die Ausnahme sein, zumal hier auch nur ein Heizkörper die entsprechende Reserve hat - die gleiche Berechnung müsste ja nun für alle anderen Heizkörper des Hauses auch wiederholt werden. Zu beachten: Zumindest im Schlafbereich kann in der Regel von reduzierten Raumtemperaturen ausgegangen werden: Das kommt der Leistung des Heizkörpers zu gute. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizung/:3:0","tags":null,"title":"Heizlastberechnung - Teil 3: Eignen sich meine Heizkörper für eine Wärmepumpe?","uri":"/posts/2022-10-29-heizung/"},{"categories":null,"content":"Was wenn die Leistung einzelner oder mehrerer Heizkörper nicht ausreicht? Grundsätzlich kosten Heizkörper nicht die Welt: Es ist denkbar - und nicht unüblich - dass im Rahmen des Einbaus einer Wärmepumpe auch einzelne oder mehrere Heizkörper ausgetauscht werden. Hier können wieder die oben bereits verlinkten Angaben zur Wärmeleistung verschiedener Heizkörpertypen konsultiert werden: Diesmal gewissermaßen als Rückwärtssuche: Welcher Heizkörper bietet die gesuchte Wärmeleistung bei reduziertem Vorlauf? Im einfachsten Fall kann schlicht der nächstgrößere Typ gewählt werden - also statt Typ 22 Typ 33 bei gleichen Maßen. So passt der neue Heizkörper weiterhin an die alte Stelle. Auch der Einbau von Fußbodenheizungen ist natürlich denkbar - aber deutlich aufwändiger. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizung/:4:0","tags":null,"title":"Heizlastberechnung - Teil 3: Eignen sich meine Heizkörper für eine Wärmepumpe?","uri":"/posts/2022-10-29-heizung/"},{"categories":null,"content":"Fazit Die Ausgangsfrage dieser Reihe war: Wieviel Energie werde ich nach der Dämmung der obersten Geschossdecke noch benötigen und eignet sich mein Altbau damit für eine Wärmepumpe? Nun nenne ich noch keine Wärmepumpe mein Eigen - über die Heizlastberechnung konnte ich aber ermitteln, dass die Dämmung der obersten Geschossdecke bis zu 40% Einsparung mit sich bringt - und ich damit bei der Heizlast je m² in durchaus interessante Bereiche für eine Wärmepumpe gelange. Durch die Berechnung der Leistung der Heizkörper konnte ich ferner ermitteln, dass diese auch bei 55°C Vorlauf noch ausreichend Reserven haben, um das Haus im Winter auf Temperatur zu bringen. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizung/:5:0","tags":null,"title":"Heizlastberechnung - Teil 3: Eignen sich meine Heizkörper für eine Wärmepumpe?","uri":"/posts/2022-10-29-heizung/"},{"categories":null,"content":"Geht es ums Haus stolpert man immer wieder über den U-Wert: Sätze wie nach EnEV brauchste ’nen U-Wert von 0,24 aber für KfW müssen es schon 0,2 sein gehören zu den Standardsätzen des stolzen Altbaubesitzers. Hier betrachte ich kurz, was es mit dem U-Wert auf sich hat, wo man relevante Informationen für sein Haus findet - und wie man die Auswirkung einer Dämmung auf den U-Wert seines Hauses berechnen kann. ","date":"2022-10-29","objectID":"/posts/2022-10-29-uwert-ermitteln/:0:0","tags":null,"title":"Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermittelnn","uri":"/posts/2022-10-29-uwert-ermitteln/"},{"categories":null,"content":"Mehr zu dieser Reihe In diesem zweiten Teil meiner Reihe “Heizlastberechnung” geht es um einige Infos rund um den U-Wert. Wer sich generell für das Thema Heizlastberechnung interessiert, kann einen Blick auf die anderen Teile werfen. Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln Heizlastberechnung - Teil 2: U-Wert ermitteln Heizlastberechnung - Teil 3: Eignen sich meine Heizkörper für eine Wärmepumpe? ","date":"2022-10-29","objectID":"/posts/2022-10-29-uwert-ermitteln/:1:0","tags":null,"title":"Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermittelnn","uri":"/posts/2022-10-29-uwert-ermitteln/"},{"categories":null,"content":"Was ist der U-Wert? Der U-Wert wird auch Wärmedurchgangskoeffizient genannt. Er beschreibt, wieviel Wärme durch ein Bauteil dringen kann - also beispielsweise vom Wohnzimmer durch die Mauer nach draußen. Der U-Wert gibt an, wieviel Wärme in Watt pro Quadratmeter entweicht - und zwar bei einem Temperaturunterschied von einem Grad Kelvin. Entsprechend wird der U-Wert in W/(m²*K) angegeben - gesprochen “Watt pro Quadratmeter und pro Kelvin”. Je kleiner der U-Wert, desto weniger Wärme gelangt nach außen - desto geringer unsere Heizkosten. Ungedämmte Mauern und Decken oder alte Fenster können leicht einen U-Wert von 1 bis 3 W/(m²K) haben. Dreifachverglaste Fenster gibt es heute mit einem U-Wert von bis zu 0,5 W/(m²K), wer sein Dach dämmt und KfW-Förderung ins Auge fasst wird auch dem U-Wert 0,14 W/(m²*K) begegnen. Dem U-Wert kommt eine kritische Bedeutung bei der Heizlast eines Gebäudes zu: Ein ungedämmtes Dach mit dem U-Wert 2 W/(m²*K) führt bei einem 100m² großen Haus und einer Norm-Auslegungstemperatur von -9°C zu Transmissionswärmeverlusten von 6.000 Watt. Bei 2100 Heizstunden lassen sich so überschlägig 12kW Heizenergie darauf zurückführen - je nach Kosten je kWh also 1200€ (bei 10ct je kWh) bis 2400 (20ct je kWh). ","date":"2022-10-29","objectID":"/posts/2022-10-29-uwert-ermitteln/:2:0","tags":null,"title":"Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermittelnn","uri":"/posts/2022-10-29-uwert-ermitteln/"},{"categories":null,"content":"Welchen U-Wert habe ich überhaupt? Hier wollen wir uns besonders mit dem U-Wert im Kontext der Heizlastberechnung beschäftigen. Insofern lautet die Frage ja erstmal: Welchen U-Wert muss ich für meine Außenwand angeben? Welchen für mein Dach? Aufschluss gibt oft erstmal die Bauakte. Hier ist festgehalten, mit welchen Materialien Wände und Decken errichtet wurden. Hier wurde mit Bimshohlblocksteinen gebaut ","date":"2022-10-29","objectID":"/posts/2022-10-29-uwert-ermitteln/:3:0","tags":null,"title":"Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermittelnn","uri":"/posts/2022-10-29-uwert-ermitteln/"},{"categories":null,"content":"Beispielwandaufbau im Netz Im einfachsten Fall findet ihr Informationen zu so einem Wandaufbau im Netz: So gibt es beispielsweise ein Dokument des energie institut hessen in dem “U-Werte typischer Außenwände” vorgestellt werden. Dort findet sich ein eigner Abschnitt “Außenwände aus Bimshohlblocksteinen 30cm”. In einer detaillierten Tabelle wird genau ausgeführt, auf welchen U-Wert man üblicherweise kommt, werden zusätzlich Wärmeübergangswerte, Putzschichten etc bedacht. Wandaufbau einer Außenwand gemäß energie institut hessen Im obigen Fall hat die Wand also einen U-Wert von 1,23W/(m²*K). ","date":"2022-10-29","objectID":"/posts/2022-10-29-uwert-ermitteln/:3:1","tags":null,"title":"Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermittelnn","uri":"/posts/2022-10-29-uwert-ermitteln/"},{"categories":null,"content":"Exkurs: U-Werte umrechnen und Dämmung hinzuaddieren Nehmen wir nun an, die Wand wurde im Nachgang noch mit 14cm Styropor gedämmt. Zwar findet sich auch hierzu eine Information beim energie institut hessen: Bei 12cm Dämmung käme man auf 0,24W/(m²K). Wir wollen es aber genau für unsere 14cm Dämmung. Kurze Google-Suche: Styropor hat einen Lambda-Wert von 0,035 W/mK. Um daraus den U-Wert zu berechnen nehmen wir den Kehrwert (1/0,035) um den Wärmewiderstandswert zu erhalten. Diesen multiplizieren wir mit 0,14m - und bilden erneut den Kehrwert: 14cm Styropor haben demnach einen U-Wert von 0,25 W/(m²K). Oder anders ausgedrückt: 1/((1/0,035)*0,14) = 0,25 Wie berechnet man aber den U-Wert zweier verbundener Bauteile (Styropor + Wand)? Analog zu zuvor: Man addiert den Wärmewiderstandswert der beiden Bauteile - also wieder den Kehrwert der U-Werte. Also: Kehrwert beider U-Werte addieren - und davon dann wieder den Kehrwert bilden: 1/(1/1,23 + 1/0,25) = 0,207 - der U-Wert meiner Außenwand beträgt (aufgerundet) 0,21 W/(m²*K)\". ","date":"2022-10-29","objectID":"/posts/2022-10-29-uwert-ermitteln/:3:2","tags":null,"title":"Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermittelnn","uri":"/posts/2022-10-29-uwert-ermitteln/"},{"categories":null,"content":"Kompletten Wandaufbau selber berechnen Es gibt auch Tools im Netz die es erlauben, den kompletten Wandaufbau selber abzubilden. Mit beispielsweise ubakus.de können bequem verschiedene Baustoffe wie Ziegel, Putz und Dämmung aus einem Katalog gewählt werden. Wandaufbau mit ubakus.de, 30cm Hohlblockstein + 10cm Styropor Das Tool stellt den Wandaufbau schematisch dar, gibt den U-Wert aus und bietet darüber hinaus auch viele weitere Informationen - wie Amortisationsrechner für Dämmmaßnahmen, Hitzewiderstand etc pp. ","date":"2022-10-29","objectID":"/posts/2022-10-29-uwert-ermitteln/:3:3","tags":null,"title":"Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermittelnn","uri":"/posts/2022-10-29-uwert-ermitteln/"},{"categories":null,"content":"Energieberatung Wer ein Energiegutachten zu seinem Haus hat, kann dort ebenfalls relevante Informationen finden. Nicht immer wurde im Rahmen des Gutachtens zwangsläufig auch eine Heizlastberechnung vorgenommen; insofern kann es schon vorkommen, dass man ein entsprechendes Gutachten sein Eigen nennt - und dennoch auf die Freude einer eigenen Heizlastberechnung nicht verzichten muss. Wandaufbau in einem Gutachten Wie unschwer zu erkennen ist, wird aber auch in machen Gutachten der Wandaufbau eher pauschaliert betrachtet: wer sich vorstellt, dass durch Hightech-Verfahren eine realitätsgetreue Abbildung des Wandaufbaus erzeugt wird, auf der die Berechnung dann fußt: Weit gefehlt. ","date":"2022-10-29","objectID":"/posts/2022-10-29-uwert-ermitteln/:3:4","tags":null,"title":"Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermittelnn","uri":"/posts/2022-10-29-uwert-ermitteln/"},{"categories":null,"content":"Weitere Tabellen bei bekannten Wandaufbauten Um sich große Rechnerei und Gutachten zu ersparen kann man auf noch generalistischere Übersichtsseiten zurückgreifen. In dieser älteren U-Wert Übersicht zu Fassadendämmplatten von Caparol finden sich ebenfalls übliche Wandbaustoffe und deren U-Werte ohne Dämmung oder mit Dämmung zwischen 6cm und 40cm. Schauen wir dort nach 30cm Hohlblocksteinen finden wir für verschiedene Dämmstoffdicken folgende Angaben: 10cm Styropor: 0,28 W/(m²*K) (der Wert der auch für 10cm Styropor bei ubakus.de berechnet wurde) 12cm Styropor: 0,24 W/(m²*K) (der Wert der für 12cm Styropor auch bei energie institut hessen angegeben wurde) 14cm Styropor: 0,21 W/(m²*K) (der Wert, den wir weiter oben für 14cm Styropor auch berechnet haben) Nach allen Überlegungen zur Ermittlung des U-Wertes von Außenwänden halten wir also fest: Grobe Übersichtstabellen erfüllen schon ihren Zweck, wenn man zumindest die Wandart und -stärke sowie ggf. die Dämmung kennt. ","date":"2022-10-29","objectID":"/posts/2022-10-29-uwert-ermitteln/:3:5","tags":null,"title":"Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermittelnn","uri":"/posts/2022-10-29-uwert-ermitteln/"},{"categories":null,"content":"Pauschalwerte bei unbekannten Aufbauten Auch für andere Bauteile gibt es im Netz in aller Regel grobe Werte an denen man sich orientieren kann, sollte man in Bauakte \u0026 Co nicht fündig werden. Gerade die Fenster im Haus können aus unterschiedlichen Baujahren in unterschiedlichen Qualitäten eingebaut worden sein. Grob lassen sich hier folgende Werte annehmen: Fenstertyp U-Wert in W/(m²*K) Einfachverglasung 5,6 2-Scheiben Isolierglas 2,8 2-Scheiben Wärmeschutzglas 1,0 - 1,2 3-Scheiben Wärmeschutzglas 0,5 - 0,7 Beim Institut Wohnen und Umwelt findet sich darüber hinaus eine umfassende Liste von Pauschalwerten für Bauteile wie Außenwände (Tabelle 5), Geschossdecken (Tabelle 6), Dachschrägen (Tabelle 7), Fußböden (Tabelle 8) und Fenster (Tabelle 9). Hier kommt man oft schon zum Ziel, wenn man das Baualter/Baujahr kennt und grob weiß ob die Wand/Decke aus Holz oder Beton besteht. ","date":"2022-10-29","objectID":"/posts/2022-10-29-uwert-ermitteln/:3:6","tags":null,"title":"Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermittelnn","uri":"/posts/2022-10-29-uwert-ermitteln/"},{"categories":null,"content":"Fazit Auch wer keine exakten Informationen zu den U-Werten seines Gebäudes zur Hand hat, kann im Netz zumindest hinreichend gute Pauschalwerte finden, die sich zumindest für einen ersten Wurf einer Heizlastberechnung gut eignen. ","date":"2022-10-29","objectID":"/posts/2022-10-29-uwert-ermitteln/:4:0","tags":null,"title":"Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermittelnn","uri":"/posts/2022-10-29-uwert-ermitteln/"},{"categories":null,"content":"Energiekrise, Heizkostenentwicklung, Nachhaltigkeit: (Nicht nur) wer einen Altbau hat wird sich dieser Tage intensiv mit der Frage beschäftigen, wo man den Heizenergiebedarf des Hauses weiter optimieren kann und ob beispielsweise eine Wärmepumpe in Frage kommt. Mit einer sogenannten Heizlastberechnung ist es möglich, ein Modell des Heizenergiebedarfes eines Hauses zu entwickeln und zu verstehen, ob sich die vorhandenen Heizkörper beispielsweise für eine Wärmepumpe eignen. In meinem konkreten Fall lautet die Frage daher: Wieviel Energie werde ich nach der Dämmung der obersten Geschossdecke noch benötigen und eignet sich mein Altbau damit für eine Wärmepumpe? Im Laufe dieser Reihe soll diese Frage beantwortet werden; wir beginnen hier mit der Heizlastberechnung. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizlastberechnung/:0:0","tags":null,"title":"Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln","uri":"/posts/2022-10-29-heizlastberechnung/"},{"categories":null,"content":"Worum geht es? Hier wird eine Heizlastberechnung anhand eines 23m² großen Raumes durchgeführt - und am Ende die Gesamtheizlast des Hausesauf Basis der Heizlasten weiterer Räume berechnet. Mit dem Ergebnis kann bspw. die Auslegung eines Heizkessels überschlägig berechnen - oder abschätzen ob der 3kW Heizkörper im Wohnzimmer auch bei Vorlauftemperaturen von 55°C oder gar 45°C noch ausreichend Leistung hat um den Raum zu erwärmen. Gerade letzteres ist oft kritisch um abzuschätzen, ob eine Wärmepumpe bspw. rentabel ist. Im Rahmen dieser Reihe werden wir die Heizlast einzelner Räume berechnen, die Leistung von Heizkörpern ermitteln und diese Leistung für geringere Vorlauftemperaturen umrechen. Im Bild zu sehen: In fast allen Räumen ist die Leistung auch bei einer Vorlauftemperatur von 55°C ausreichend - und in fast keinem Raum bei einer Vorlauftemperatur von 45°C. Da dies eine mehrteilige Reihe ist empfehle ich auch folgende Lektüre: Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermitteln Heizlastberechnung - Teil 3: Eignen sich meine Heizkörper für eine Wärmepumpe? ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizlastberechnung/:1:0","tags":null,"title":"Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln","uri":"/posts/2022-10-29-heizlastberechnung/"},{"categories":null,"content":"Ein Wort vorab Ich bin nicht vom Fach - alle Angaben sind falsch ;-). Mein Ziel ist es nicht, eine 100% akurate Ermittlung der Heizlast meines Hauses vorzunehmen (die Heizlastberechnung an sich ist ja schon nur ein Modell): Sondern die grundlegenden Konzepte soweit verinnertlicht zu haben, dass ich näherungsweise verstehen kann, wie sich bspw. die Dämmung der ob ersten Geschossdecke auf meinen Heizwärmebedarf auswirkt. Was wir hier machen ist nach meinem Verständnis eine Interpretation der Norm DIN EN 12831-1: Energetische Bewertung von Gebäuden - Verfahren zur Berechnung der Norm-Heizlast - Teil 1: Raumheizlast. Die Norm liegt mir nicht vor, und das Netz ist voller veralteter, falsch abgeschriebener und unvollständiger Informationen dazu, die ich nach besten Wissen und Gewissen neu arrangiere. Zu dieser Norm gibt es auch einen Teil 2: Heizungsanlagen in Gebäuden - Verfahren zur Berechnung der Norm-Heizlast - Beiblatt 2: Vereinfachtes Verfahren zur Ermittlung der Gebäude-Heizlast und der Wärmeerzeugerleistung Der nach meinem Verständnis nicht mehr aktuell ist und sich auf Verbrauchsmessungen und Hüllflächenberechnungen stützt. Beim IKZ: Magazin für Gebäude und Energietechnik wird die vereinfachte Berechnung am Beispiel durchgeführt. Weiterhin gibt es einen Teil 3: Energetische Bewertung von Gebäuden - Verfahren zur Berechnung der Norm-Heizlast - Teil 3: Trinkwassererwärmungsanlagen, Heizlast und Bedarfsbestimmung Dieser befasst sich mit der Trinkwassererwärmung, die damit nicht Teil der hier geschilderten Heizlastberechnug ist. Hier kommt der Gesetzgeber mit einer Formel zur Hilfe: Quadratmeterzahl Haus * 32 * 1,1, die so in §9 der Heizkostenverordnung vorgeschlagen wird. In meinem Fall komme ich auf 110 * 32 * 1,1 = 3.872kWh/a was wiederum den 4.626 kWh/a aus einem Energiegutachten recht nahe kommen. Alternativ könnte man auch überschlägig den Gasverbrauch eines Sommermonates (da ohne Heizwärme) mit 12 multiplizieren um auf den Jahresverbrauch zur Trinkwassererwärmung zu kommen; auch damit komme ich überschlägig auf den Wert aus dem Energiegutachten. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizlastberechnung/:2:0","tags":null,"title":"Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln","uri":"/posts/2022-10-29-heizlastberechnung/"},{"categories":null,"content":"Wie setzt sich die Heizlast zusammen? Die Heizlast eines Raumes ist die Summe folgender Wärmeverluste: Transmissionswärmeverluste: Wieviel Wärme verliert ein Raum durch Fenster, Decken und Wände nach außen oder in benachbarte Räume? Lüftungswärmeverluste: Wieviel Wärme verliert ein Raum durch Lüftung? Aufheizleistung: Wieviel Wärme wird benötigt um den Raum nach Absenkung/Nichtbenutzung wieder auf Temperatur zu bringen Durch die Erhebung dieser Informationen und Aufsummierung aller Räume können wir die Heizlast für das gesamte Haus berechnen. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizlastberechnung/:3:0","tags":null,"title":"Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln","uri":"/posts/2022-10-29-heizlastberechnung/"},{"categories":null,"content":"Heizlastberechnung Im Folgenden berechnen wir die Heizlast für einen 23m² großen Beispielraum. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizlastberechnung/:4:0","tags":null,"title":"Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln","uri":"/posts/2022-10-29-heizlastberechnung/"},{"categories":null,"content":"Transmissionswärmeverluste Die Transmissionswärmeverluste sind die Wärmeverluste, die ein Raum durch Wände, Decken, Böden und Fenster zu anderen Räumen hat. Aus Gründen der Einfachheit werden Räume mit gleichem Temperaturnivau in der Rechnung nicht berücksichtigt (die Wand vom Wohnzimmer zum Esszimmer muss also nicht separat berücksichtigt werden, da man davon ausgeht, dass die die Wärmeverluste gegenseitig ausgleichen). Die Heizlast für alle genannten Bauteille wird dabei wie folgt berechnet: Fläche des Bauchteils * Wärmedurchgangskoeffizient * Temperaturdifferenz Der Wärmedurchgangskoeffizient ist der oft zitierte U-Wert. Er gibt an, wieviel Watt Wärmeleistung je Quadratmeter und Grad Kelvin bspw. draußen verloren geht. Einige Möglichkeiten an diesen U-Wert zu gelangen sind in Heizlastberechnung - Teil 2: U-Wert ermitteln aufgeführt. Die Temperaturdifferenz ist hierbei die Temperaturdifferenz zwischen dem betrachteten Raum (bspw. 21°C im Wohnzimmer) und dem angrenzenden Bereich (etwa 17°C im Schlafzimmer). Achtung: Für den Außenbereich wird die sogenannte Normauslegungstemperatur betrachtet. Diese lässt sich auf verschiedenen Webseiten nachschlagen, bspw. auf der Klimakarte des Bundesverbandes Wärmepumpe e.V. Bei mir liegt die Normauslegungstemperatur -9°C. Im Wohnzimmer heize ich auf 21°C - die Temperaturdiffernz liegt damit bei 30°K. Ein Beispiel: 6,58m² Fensterfläche mit einem U-Wert von 1,9 W/(m²*K) bei einer Temperaturdifferenz von 30°K: 6,58m² * 1,9 W/(m²*K) * 30K = 375,06 W Der Temperaturverlust der Fensterfläche beträgt also 375,06 Watt. Wollen wir die Transmissionswärmeverluste für unseren 23m² großen Beispielraum berechnen, müssen natürlich noch Decke, Boden, Tür zum Flur etc. betrachtet werden. Dies könnte bspw. wie folgt aussehen: Bauteil Fläche (m²) U-Wert (W/m²*K) Temperatur-Differenz (°K) Verlust (W) Fenster 6,58 1,9 30 375,06 Außenwand 1,5 0,24 30 10,8 Rolladenkasten 1,57 1 30 47,1 Decke 23 0,14 11 35,42 Keller 23 1 11 253 Tür Flur 2,39 3 4 28,68 Summe 750,06 Die Transmissionswärmeverluste des Beispielraumes betragen in Summe also rund 750 W. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizlastberechnung/:4:1","tags":null,"title":"Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln","uri":"/posts/2022-10-29-heizlastberechnung/"},{"categories":null,"content":"Lüftungswärmeverluste Für ein gesundes Raumklima muss gelüftet werden, entweder händisch oder durch automatische Lüftungsanlagen. Durch den Austausch der aufgeheizten, nassen Luft gegen kalte Luft sinkt die Luftfeuchtigkeit. Es wird aber auch Wärmenergie abgegeben. Zur Berechnung stellt sich zunächst die Frage, wie oft die Raumluft je Stunde ausgetauscht wird (die sogenannte Luftwechselrate): Eine Luftwechselrate von 1 h^-1 bedeutet, dass das gesamte Raumvolumen einmal je Stunde ausgetauscht wird. Im Falle eines 23m² großen Raumes mit 2,55m Deckenhöhe also 23 * 2,55 * 1h^-1 = 58,65m³/h Luft. Es gibt für unterschiedliche Räume unterschiedliche Angaben zu angestrebten Luftwechselramen - ein Badezimmer oder eine Küche wird man wegen der hohen Luftfeuchtigkeit sicher öfter/länger lüften als ein Wohnzimmer. Zumindest für Standard-Räume scheint aber häufig eine Luftwechselrate von 0,5 h^-1 angenommen zu werden: Im Schnitt wird dann das Raumvolumen an Luft alle zwei Stunden ausgetauscht. Für unsere Rechnung ergibt sich damit ein Volumenstrom von 29,325m³/h: 23m² * 2,55m * 0,5h^-1 = 29,325m³/h. Um nun die Lüftungswärmeverluste zu berechnen, multiplizieren wir den berechneten Volumenstrom mit der spezifischen Wärmekapazität von Luft (0,34 Wh/(m³*K)) und der Temperaturdifferenz: 29,32m³/h * 30K * 0,34 Wh/(m³*K) = 299,12 W Oder alles in einer Formel: Raumfläche * Raumhöhe * Luftwechselrate * Temperaturdifferenz * Wärmespeicherkapazität_Luft Oder eben: 23m² * 2,55m * 0,5h^-1 * 30K * 0,34Wh/(m³*K) = 299,12 W Der Lüftungswärmeverlust unseres Beispielraumes beträgt damit 299,12 W. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizlastberechnung/:4:2","tags":null,"title":"Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln","uri":"/posts/2022-10-29-heizlastberechnung/"},{"categories":null,"content":"Wiederaufheizleistung Die Wiederaufheizleistung gibt an, wie viel Leistung benötigt wird, wenn er nach Unterbrechung des Heizbetriebes (bspw. wg. Nachtabsenkung oder Nichtbenutzung) wieder aufgeheizt werden soll. Mein persönlicher Eindruck ist, dass dieser Wert häufig eher unterschlagen wird, dazu finden sich vereinzelt auch Quellen: Meistens wird bei der Heizlastberechnung diese Aufheizleistung nicht berücksichtigt, weil dadurch die Leistung des Wärmererzeugers und die Raumheizlasten und entsprechend die Heizflächen für den “normalen Betrieb” zu groß ausgelegt werden und sich die Wärmeabgabe der Heizflächen evtl. als Fremdwärme bemerkbar machen. Da aber zunehmend die Heizung für das gesamte Gebäude oder einige Räume zeitweise abgesenkt oder sogar total abgeschaltet werden, wird die Zusatzaufheizleistung wieder aktuell. Quelle: http://www.bosy-online.de/heizlastberechnung_nach_din_en_12831.htm Bei Gebäude Energieberater findet sich gar die Information, dass der Wiederaufheizfaktor mit der Überarbeitung der Norm DIN EN 12831 “national auf 0 gesetzt” wurde - und damit die Wiederaufheizleistung pauschal immer mit 0W veranschlagt wird: Meistens wird die Heizlast zu hoch ermittelt. Jetzt wurde die Notbremse gezogen. Wegen der teilweise harschen Kritik, vor allem am Wiederaufheizfaktor, der bei Wärmepumpen nicht sinnvoll anzuwenden ist und auch allgemein die Effizienz einer Anlage reduziert, wurde eine nationale Neuherausgabe des Beiblatts zur DIN EN 12831 eingeleitet. […] Der Wiederaufheizfaktor wird national auf 0 gesetzt und im Vorwort der Begriff „Norm-Heizlast“ definiert. Quelle: https://www.geb-info.de/neue-normen/neue-normen-heizlastberechnung-wird-ueberarbeitet Für alle Interessierten, die den Wert dennoch berechnen möchten: Die Aufheizleistung ist das Produkt aus der Grundfläche des Raumes in Quadratmetern und dem Wiederaufheizfaktor. Letzterer berücksichtigt Faktoren wie Gebäudemasse, Luftwechselrate, gewünschter Wiederaufheizzeit und Absenkzeit bzw. dem Temperaturabfall in der Absenkzeit. Der korrekte Wert lässt sich entsprechenden Tabellen entnehmen. Ein Beispiel: Während der Nachtabsenkung sinkt die Temperatur im 23m² großen Raum um 3°C, Fenster und Türen sind über Nacht geschlossen. Die Gebäudemasse ist schwer/mittelschwer, innerhalb von einer Stunde soll der Raum wieder warm sein: Gemäß Tabelle beträgt der Wiederaufheizfaktor für diese Rahmenbedingungen 34 W/m². Damit wird die Aufheizleistung für unseren 23m² großen Beispielraum mit 34 W/m² * 24m² = 787Wberechnet. Aus meiner Laiensicht kann die Wiederaufheizleistung zunächst auf 0W gesetzt werden; zum Abgleich mit den realen Verbräuchen kann die Wiederaufheizleistung dann feinjustiert werden, über die jeweiligen Wiederaufheizfaktoren lassen sich dann Szenarien abbilden wie “Büro, von 17-8 Uhr unbeheizt” (höherer Faktor) oder “Wohnzimmer mit nur kleiner Außenwand und entsprechend geringem Temperaturabfall in der Nacht” (kleinerer Faktor). Für unseren 23m² großen Beispielraum notieren wir für die Wiederaufheizleistung damit 0 Watt. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizlastberechnung/:4:3","tags":null,"title":"Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln","uri":"/posts/2022-10-29-heizlastberechnung/"},{"categories":null,"content":"Die Summe der Wärmeverluste unseres Beispielraumes Unser 23m² großer Raum hat nun: Transmissionswärmeverluste von 750 W Lüftungswärmeverluste 299,12 W Wiederaufheizleistung von 0 W In Summe also eine Heizlast von 1049,12 W. Die Heizlast wird in der Regel in Watt je m² angegeben - also 1049,12W / 23m² = 45,61 W/m² für unseren Beispielraum. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizlastberechnung/:4:4","tags":null,"title":"Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln","uri":"/posts/2022-10-29-heizlastberechnung/"},{"categories":null,"content":"Heizlastberechnung für das gesamte Haus Diese Heizlastberechnung können wir nun Raum für Raum wiederholen um so die Heizlast des gesamten Hauses zu ermitteln. Hier ein fiktives Beispiel mit dem Beispielraum von oben sowie weiteren Zimmern. Die Heizlasten je m² können stark variieren - beispielsweise weil ein Zimmer vielleicht noch alte Fenster hat oder an der Wetterseite des Hauses gelegen ist. Raum Heizlast (W) Heizlast je m² (W/m²) Wohnzimmer 1049 46 Küche 400 60 Esszimmer 1000 100 Bad 300 55 Flur 600 50 Schlafzimmer 1 700 40 Schlafzimmer 2 800 60 Büro 500 70 Summe 5349 60 In Summe kommen wir also auf eine Heizlast von 5349 W - oder grob 60 W/m². Das wäre in diesem Fall für einen Altbau schon ein recht guter Wert - auch hier gibt es einige Pauschalwerte die man zum Vergleich heranziehen kann - dabei wird immer die Heizlast je m² verglichen: Gebäudetyp Heizlast W/m² Altbau 120 Altbau, teilgedämmt 60-120 Neubau, WärmeschutzV ‘95 40-60 Neubau, EnEV 2002 30-50 Passivhäuser 15 Weitere Pauschalwerte finden sich bspw. hier oder hier. Die Heizlast in W (hier: 5349 W) wird oft als grober Richtwert für den Heizkessel genutzt: In diesem Fall müsste der Heizkessel also mindestens 5kW Leistung haben (gerade bei Altbauten liegen übliche Werte (je nach Größe und Dämmstandard) eher bei 10kW und mehr.) ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizlastberechnung/:5:0","tags":null,"title":"Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln","uri":"/posts/2022-10-29-heizlastberechnung/"},{"categories":null,"content":"Eine Faustformel: Heizlast und Heizwärmebedarf Während die Heizlast eine Kennzahl ist, die Wärmeverluste und damit zusammenhängend auch die Dimensionierung der Heizung bestimmt, gibt der Heizwärmebedarf darüber Auskunft, wieviel Energie tatsächlich benötigt wird - also bspw. den Brennstoffverbrauch an Gas. Hinweis: Berechnung nach DIN V 4108-6 Der Heizwärmebedarf wird für gewöhnlich nach DIN V 4108-6 über eine eigene Formel berechnet: Heizwärmebedarf = [Gradtagsfaktor x (Transmissionswärmeverlust + Lüftungswärmeverlust)] – [Nutzungsgrad interner Gewinne x (solare Gewinne + interne Gewinne)] Zu beachten ist, dass die Berechnung der Wärmeverluste in diesem Fall nicht anhand der Normauslegungstemperatur erfolgt (also bspw.-9°C) - sondern anhand von Durchschnittstemperaturen für den betrachteten Zeitraum. Es handelt sich hierbei also nochmal um eine ganz andere Systematik. Häufig werden Heizlast und Heizwärmebedarf über die sogenannte Volllaststunden mit einer Faustformel in Relation gestellt: So wird dann bspw. aus dem Gasverbrauch (=Heizwärmebedarf) die Heizlast überschlagen. Übliche Werte für Volllaststunden liegen bspw. um 2.100 für Einfamilienhäuser. In einem fiktiven Szenario mit 30.000 kWh Gasbedarf würde man so überschlagen, dass etwas ein 14kW Heizkessel benötigt wird. Und ebenso können wir damit überschlagen, dass unser fiktives Haus von oben mit einer Heizlast von 5.349kW etwa 11.233kWh Gas einkaufen müsste. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizlastberechnung/:6:0","tags":null,"title":"Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln","uri":"/posts/2022-10-29-heizlastberechnung/"},{"categories":null,"content":"Eignet sich mein Altbau für eine Wärmepumpe? Zurück zur Ursprungsfrage: Wieviel Energie werde ich nach der Dämmung der obersten Geschossdecke noch benötigen und eignet sich mein Altbau damit für eine Wärmepumpe? Den ersten Teil der Frage können wir bereits beantworten, durch die Heizlastberechnung kennen wir die Gesamtheizlast des Hauses und können sogar grob den Heizwärmebedarf überschlagen. Hier lassen sich (beispielsweise mit Excel) auch sehr gut Zahlenspiele anstellen: Wie entwickelt sich meine Heizlast wenn ich… …alle Fenster gegen dreifachverglaste austausche? =\u003e In der Berechnung der Transmissionswärmeverluste den U-Wert aller Fenster auf 0,9W/(m²*K) setzen. …die oberste Geschossdecke dämme? =\u003e In der Berechnung der Transmissionswärmeverluste den U-Wert für das Dach auf 0,14W/(m²*K) setzen. Für den zweiten Teil der Frage möchte ich noch herausfinden, ob die einzelnen Heizkörper ausreichend groß bemessen sind. Mehr dazu in Heizlastberechnung - Teil 3: Eignen sich meine Heizkörper für eine Wärmepumpe? ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizlastberechnung/:7:0","tags":null,"title":"Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln","uri":"/posts/2022-10-29-heizlastberechnung/"},{"categories":null,"content":"Gaszähler mit ESP32 und einem QMC5883 Sensor automatisch auslesen","date":"2022-10-18","objectID":"/posts/2022-10-12-gaszaehler/","tags":null,"title":"Auf Irrwegen: Gaszähler automatisch auszulesen","uri":"/posts/2022-10-12-gaszaehler/"},{"categories":null,"content":"Smart Home und der mitleidige Blick meiner Ehefrau, wenn ich ihr mal wieder eine Automatisierung oder eine neue Sensorüberwachung präsentiere: Diese beiden Sachen gehen Hand in Hand. Das war auch wieder bei diesem Projekt der Fall: Der automatischen Überwachung des Gaszählers. ","date":"2022-10-18","objectID":"/posts/2022-10-12-gaszaehler/:0:0","tags":null,"title":"Auf Irrwegen: Gaszähler automatisch auszulesen","uri":"/posts/2022-10-12-gaszaehler/"},{"categories":null,"content":"Warum das Ganze Ich erfasse immer schon monatlich unseren Strom- und Gasverbrauch. Bisher händisch: Einmal im Monat ein Foto von beiden Zählern - und bei Zeiten dann in Excel eingepflegt. Fertig. Im Rahmen der Dämmung unseres Hauses sowie der Heizlastberechnung wollte ich aber genauer verstehen, wie (schnell) sich der Erdgasverbauch entwickelt. Wie so oft: Das Ganze war doch komplizierter als gedacht. ","date":"2022-10-18","objectID":"/posts/2022-10-12-gaszaehler/:1:0","tags":null,"title":"Auf Irrwegen: Gaszähler automatisch auszulesen","uri":"/posts/2022-10-12-gaszaehler/"},{"categories":null,"content":"Das Grundprinzip In einigen Gaszählern - so auch in meinem G4 RF1 - finden sich Magneten in einer Walze der Segmentanzeige. Positioniert man einen Reed-Kontakt an die richtige Position, kann dieser recht zuverlässig detektieren, wenn sich die Walze beispielsweise von 9 nach 0 weiter dreht, weil dann eben auch der Magnet am Kontakt vorbeigeführt wird. Passende Kontakte / Sensoren gibt es direkt vom Hersteller - der lässt sich das mit 50-60€ aber auch gut vergüten. In solchen Fällen ist “selber machen” immer eine gute Option - und auch mindestens eine ebensogute Ausrede, den gleichen Betrag in Zubehör und Werkzeug zur Umsetzung des Projektes zu investieren ;-). In meinem Fall ist auf dem Gaszähler übrigens vermerkt, dass 1 Impuls 0,1m³ entspricht - demzufolge findet sich der Magnet auf der zweiten Walze nach dem Komma (eine volle Umdrehung der zweiten Nachkommastelle entspricht einem 1er-Inkrement der ersten Nachkommastelle). ","date":"2022-10-18","objectID":"/posts/2022-10-12-gaszaehler/:2:0","tags":null,"title":"Auf Irrwegen: Gaszähler automatisch auszulesen","uri":"/posts/2022-10-12-gaszaehler/"},{"categories":null,"content":"Versuch 1: Der Aqara Tür- und Fensterkontakt Im Netz finden sich verschiedene Berichte, dass ein Aqara Tür- und Fensterkontakt genutzt werden kann, um die Impulse zu messen. Diese Lösung wäre natürlich besonders charmant, da ich (a) solche Kontakte ohnehin zu Hause habe, (b) die Sensoren sehr lange batteriebetrieben laufen und sie (c) sehr einfach über Zigbee in das bestehende Hausautomatisierungssystem eingebunden werden können. Die Idee ist einfach: Sensor aus der Plastikhülle befreien, an die richtige Stelle auf den Gaszähler platzieren - fertig… …oder auch nicht. Aquara Tür- und Fenstersensor im Auslieferungszustand Die untere Kappe des Kontaktes lässt sich leicht öffnen Mit einem Messer lässt sich auch leicht der Rest zerstörungsfrei öffnen (anders als im Bild gezeigt ;-)) Der Sensor wird in die entsprechende Aufnahme platziert. Das Glasröhrchen mit dem Reed-Kontakt sollte grob oberhalb der zweiten Nachkommastelle liegen, da sich in dieser Walze der Magnet befindet Kein Signal: Die nächsten Tage habe ich den Sensor in alle möglichen und unmöglichen Positionen und Ausrichtungen an den Gaszähler geklebt. Ohne Erfolg Trotz aller Bemühungen - und gut 10 abenteuerlichen Klebepositionen: Der Sensor erkennt den Magneten nicht, egal wie oft dieser im Betrieb am Sensor vorüber zieht. Das Problem ist bekannt - nicht jede Kombination aus Gaszählerfabrikat und Aqara-Sensor scheint zu funktionieren. ","date":"2022-10-18","objectID":"/posts/2022-10-12-gaszaehler/:3:0","tags":null,"title":"Auf Irrwegen: Gaszähler automatisch auszulesen","uri":"/posts/2022-10-12-gaszaehler/"},{"categories":null,"content":"Versuch 2: IP Webcam Im nächsten Versuch sollte ein altes Handy als IP Webcam herhalten - ehrlicherweise nur um die Zeit zu überbrücken, bis das Zubehör für Versuch 3 eingetroffen ist. Mit einer entsprechenden App lassen sich alte Android Geräte relativ leicht als IP Webcam betreiben. Die App bietet umfangreiche Konfigurationsoptionen, letztlich benötige ich aber nur folgende Gegebenheiten: Bild lässt sich via URL auslesen LED-Licht lässt sich via HTTP-API ein- und abschalten So bekomme ich nun stündlich einen aktuellen Zählerstand via Telegram-Nachricht mitgeteilt - dank LED Licht auch in der Nacht gut lesbar. Nur aus Interesse habe ich versucht, die Bilder auch automatisiert auszuwerten - zumindest via SSOCR ist es mir aber nicht gelungen. Würde man so etwas zum Laufen bringen wollen - ein Blick auf AI on the edge wäre sicher lohnenswert: Dort werden Wasserzähler mittels ESP32 und einem neuronalem Netzwerk ausgelesen. Entsprechende Trainingsdaten inklusive… Ein ausgemustertes Handy überwacht den Gaszähler Der Versuch die Bilder automatisch zu verarbeiten… scheitert aber: SSOCR erkennt maximal 3 Ziffern Wenn es schon mit der automatischen Auswertung nicht klappt: Dieses Blockly schickt stündlich… …Telegram-Nachrichten mit dem aktuellen Zählerstand 🥴 Eine Erkenntnis ist aber: Alte Handys lassen sich doch sehr gut als IP Webcam umfunktionieren: Bewegungserkennung, Zwei-Wege-Kommunikation, LED-Licht, Video, Automatische Aufnahmen… alles möglich. ","date":"2022-10-18","objectID":"/posts/2022-10-12-gaszaehler/:4:0","tags":null,"title":"Auf Irrwegen: Gaszähler automatisch auszulesen","uri":"/posts/2022-10-12-gaszaehler/"},{"categories":null,"content":"Versuch 3: Kompass Nachdem klar war, dass der Sensor des Aqara-Kontaktes nicht fein genug ist, um den Magneten zu registrieren, habe ich nach Alternativen geschaut. Die Optionen: Reed-Kontakt Hall-Sensor Kompass/Magnetometer Nachdem ich mit dem Reed-Kontakt im Aqara-Sensor schon auf die Nase gefallen war, habe ich zunächst in Richtung Hall-Sensor überlegt. Auch hier finden sich aber unterschiedliche Berichte, welcher Sensor für diesen Zweck jetzt empflindlich genug ist. Zu guter Letzt habe ich aber ein Projekt gefunden, wo ein Magnetometer HMC5883 mit Raspberry Pi die Aufgabe übernimmt. Die Überlegung, dass ein Sensor, der das Erdmagnetfelt detektieren kann, auch den Magneten im Gaszähler detektieren können sollte, fand ich plausibel. Der Sensor QMC5883 wird mit Stifleisten versehen Nachdem ich den ersten Sensor beim Anlöten der Stiftleisten frittiert hatte und die Ersatzlieferung eingetroffen war, konnte das Projekt umgesetzt werden. Material: ESP32 Microprozessor QMC5833 Kompass Breadboard Jumperkabel Werkzeug: Lötkolben Die Idee: Der ESP32 wählt sich ins Wifi ein und übermittelt die Impulse via MQTT an meine Iobroker-Instanz, wo bei jedem Impuls der Zählerstand um 0,1m³ erhöht wird. Springt die zweite Nachkommastelle von 6 auf 7 (rechts im Video), erkennt der Kompass einen starken Ausschlag (links im Video). So lassen sich wiederum Inkremente der ersten Nachkommastelle detektieren Nachdem die grundlegende Funktionsweise sichergestellt wurde (etwas Malerkrepp hält den Sensor an Ort und Stelle), habe ich noch einen kleinen Halter 3d-gedruckt, dessen Modell auf Thingiverse abrufbar ist: https://www.thingiverse.com/thing:5581975 Mittels eines 3d-gedruckten Halters wird der Sensor genau über die zweite Nachkommastelle der Segmentanzeige positioniert. Das Modell in der Rundumansicht Das Sketch für das Projekt ist relativ simpel: Im Wesentlichen werden 10 Sekunden lang Messwerte des Magnetfeldes gesammelt. Da der Sensor relativ empfindlich ist und die Werte bei Erkennung des Magneten überlaufen können, wird die Signalstärke auf 4000 beschränkt. Ist der Durchschnittswert der letzten 10 Sekunden \u003e 2000, wird das high Flag gesetzt. Ist der Durchschnittswert der letzten 10 Sekunden kleiner 300 und das High-Flag ist gesetzt, wurde eine Rotation erkannt, das high Flag wird entfernt und das Ganze via MQTT publiziert. Die Erkennung basiert also auf Anstieg und anschließendem Fall der gemessenen Feldstärke. Dieses Vorgehen erscheint mir relativ robust, weil es wenig Fehlauslösungen gibt - selbst wenn der Magnet längere Zeit direkt unter dem Sensor stehen bleibt. Das wäre anders, wenn der Trigger für high und der Trigger für low identisch wären - bei ungünstiger Positionierung des Magneten könnte der Sensor zwischen den Auslösewerten hin- und herspringen. void loop() { loopMqtt(); sVector_t mag = compass.readRaw(); // calculate field strength \u0026 store for average calculation fieldStrength = sqrt(mag.XAxis ^ 2 + mag.YAxis ^ 2 + mag.ZAxis ^ 2); avg = avgFieldStrength.reading(fieldStrength \u003e 4000 ? 4000 : fieldStrength); Serial.print(\"Arrow: \"); Serial.println(fieldStrength); // every 10 seconds: evaluate if signall falls from high (magnet detected) to low (no magnet) if ((unsigned long)(millis() - timer) \u003e 10000) { if (avg \u003c 300 and isHigh) { isHigh = false; client.publish(\"mqtt.0.gas_meter.tick\", itoa(millis(), charBuf, 10)); } if (avg \u003e 2000) { isHigh = true; } timer = millis(); } delay(500); } Das komplette Skript findet sich auf Github. ","date":"2022-10-18","objectID":"/posts/2022-10-12-gaszaehler/:5:0","tags":null,"title":"Auf Irrwegen: Gaszähler automatisch auszulesen","uri":"/posts/2022-10-12-gaszaehler/"},{"categories":null,"content":"Fazit Insgesamt bin ich ziemlich zufrieden mit dem Ergebnis: Nach etwas Feinjustierung gibt es auch über mehrere Tage keine Abweichung, der erfasste Zählerstand entspricht (bis auf die erste Nachkommastelle) genau dem tatsächlichen Zählerstand. Und via Iobroker/Jarvis kann ich den Tagesverbauch auch sehr leicht graphisch visualisieren lassen. Nach 24 Stunden hat der Sensor alle 16 Ticks korrekt erfasst ","date":"2022-10-18","objectID":"/posts/2022-10-12-gaszaehler/:6:0","tags":null,"title":"Auf Irrwegen: Gaszähler automatisch auszulesen","uri":"/posts/2022-10-12-gaszaehler/"},{"categories":null,"content":" Moin 👋, ich bin Daniel und beschäftige mich seit gut 25 Jahren intensiv mit Computersachen. Diese Seite dient dazu, einige dieser Dinge festzuhalten in der Hoffnung dass sie nützlich sind; und mehr noch in der Hoffnung, dass ich sie schnell wiederfinde, wenn ich sie wieder benötige. Mehr Informationen gibt’s an den üblichen Orten: ","date":"2022-10-09","objectID":"/about/:0:0","tags":null,"title":"About","uri":"/about/"},{"categories":null,"content":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Endlich ist es soweit: 9,75kwp Photovoltaik schimmern im Sonnenlicht auf dem Dach - mit Wechselrichter und Speicher von Sungrow. Die nützliche App des Anbieters mit all ihren Analysemöglichkeiten kann aber nur kurz den Wunsch nach einem direkteren Zugriff auf die Daten zwecks Einbindung in die Hausautomatisierung stillen. Nach einigem Experimentieren funktioniert der Zugriff nun - die Erfahrung möchte ich teilen. ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:0:0","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Kurze Einführung Über die Modbus-Schnittstelle des Wechselrichters können verschiedene Daten der Photovoltaik-Anlage ermittelt werden, wie beispielsweise: Ertrag der Anlage (Momentan und Tagessumme) Eigenbedarf (Momentan und Tagessumme) Einspeisung/Bezug ins/aus dem Netz (Momentan und Tagessumme) Lade- und Entladestrom der Batterie (Momentan und Tagessumme) Verschiedene Monatswerte Spannung und Strom der Strings Ladestand der Anlage Aktuell lese ich etwa 100 Werte aus - davon werden natürlich nicht alle benötigt. Grundsätzlich ist der Modbus-Standard unabhängig von der eingesetzten Hausautomatisierungslösung - ich nutze in meinem Fall Iobroker, auch mit anderen Tools und Skripten lassen sich die Daten bei Bedarf verarbeiten. ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:1:0","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Einrichtung ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:2:0","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Verbindung Beim Standard “Modbus über TCP” kann das Modbus-Gerät (hier: der Wechselrichter) einfach über das Heimnetz verbunden werden. Sungrow bietet für die hier beschriebenen Wechselrichter unterschiedliche Arten der Verbindung an: LAN-Verbindung direkt am Wechselrichter LAN-Verbindung via WiNet-S Dongle Wifi-Verbindung via WiNet-S Dongle Gemäß verschiedenen Foren-Berichten, die auf den Sungrow-Support verweisen, sowie meiner eigenen Erfahrung ist eine Modbus-Verbindung NUR via LAN-Anschluss direkt am Wechselrichter möglich. Der Wechselrichter wird also direkt via LAN-Kabel mit dem Router/Switch im Heimnetz verbunden. ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:2:1","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Installation in IoBroker Installiere den Modbus-Adapter in IoBroker indem ihr im Reiter Instanzen nach Modbus sucht und den Adapter installiert. ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:2:2","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Verbindungseinstellungen Unter Instanzen-\u003eModbus kann der Adapter nun konfiguriert werden. Im Tab Allgemein werden folgende Daten hinterlegt: Partner IP-Adresse: IP eures Sungrow WRs Port: 502 Geräte ID: 1, ggf. abweichend Typ: Master Aliases benutzen: Deaktivieren / Nein ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:2:3","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Eingangsregister Die vom Wechselrichter bereitgestellten Informationen müssen aus sog. Registern ausgelesen werden. Für die Anbindung müssen neben Adresse und Datentyp auch Länge und Faktor hinterlegt sein, idealerweise auch Einheit und eine kurze Beschreibung zur späteren Identifikation. Da das händische Hinterlegen der Register nicht praktikabel ist, können diese auch importiert werden. Über den Doppelpfeil (zweites Icon von links auf der linken Seite) können die Register als TSV (Tab seperated Value) hinterlegt werden. Ein TSV mit den Registern ist hier zu finden. Dort auf “Raw” klicken um zum TSV zu gelangen. Nach dem Einrichten kann die Konfiguration gespeichert werden. ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:2:4","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Prüfen Im Navigationsbaum kann nun Objekte geöffnet werden. Unter modbus.0.inputRegisters sollten sich nun die Datenpunkte finden. Hier sollte recht schnell ersichtlich werden, ob die Verbindung funktioniert, bspw. anhand der Register 13001 (PV Erzeugung heute) oder 13007 (Wirkleistung). Sind hier keine oder falsche Werte zu sehen, gibt es Probleme mit der Verbindung. Unter Protokoll in der Navigation finden sich weitere Informationen dazu. ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:2:5","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Fehlerbehandlung Die Modbus-Verbindung des Wechselrichters erscheint teilweise etwas fragil. Im Iobroker-Forum gibt es viele Berichte von Verbindungsproblemen aller Art. Im Folgenden ein paar Tipps dazu: ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:3:0","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Fehleranalyse mit modbus-cli Um zu prüfen ob zumindest die Verbindung zum Wechselrichter funktioniert, können Modbus Tools wie bspw. Modbus-CLI genutzt werden. Ein einfaches Beispiel: daniel@laptop ~ % modbus 192.168.1.123:502 -s 1 4999 192.168.1.123: Durch deine IP ersetzen 502: Modbus Port am WR, idR 502 -s 1: Eure ClientID, idR 1 oder 100 4999: Das Register das ausgelesen werden soll Das Ergebnis sollte nun wie folgt aussehen Parsed 0 registers definitions from 1 files 4999: 2022 0x7e6 Interpretation der Rückgabe: 4999: Das ausgelesene Register 2022: Der Wert in dezimal. Hier: Das aktuelle Jahr 2022 0x7e6: Der Wer in hexadezimal. Anstatt des Register 4999 können natürlich auch beliebige andere Register ausgelesen werden. Aber Achtung: Die Erfahrung zeigt, dass es gerade mit diesem Tool nicht immer leicht ist, die richtigen Datentypen zu hinterlegen - selbst bei korrekter Verbindung kommen so fehlerhafte Rückgaben zu stande. Meine Empfehlung daher: Nutzt das Tool eher um sicherzustellen, dass die Verbindung funktioniert und haltet euch nicht damit auf, andere Werte auslesen zu wollen. ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:3:1","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Richtiges Gerät finden Antwortet der Einrichtungsassistent ist die IP-Adresse falsch In der Regel werdet ihr den Wechselrichter via WLAN-Stick mit dem Internet verbunden haben und zusätzlich über den direkten Anschluss die Modbus-Verbindung vornehmen. Damit hat der Wechselrichter zwei IPs - einmal via WLAN und einmal via LAN. Über beide IPs ist Modbus auch (theoretisch) erreichbar - ihr müsst nun sicherstellen, dass ihr Modbus über den LAN-Anschluss konfiguriert. Die korrekte IP kann bspw. über Fritzbox gefunden werden: Dort lassen sich unter Heimnetz-\u003eNetzwerk alle Netzwerk-Geräte finden. Die Sungrow-Geräte haben in der Regel eine Mac-Adresse, die mit “AC” beginnt (Mac-Adressen ggf. über den mit “+/-” beschrifteten Button oben rechts anzeigen lassen). Weiterhin scheinen sich die Geräte als espressif-sungrow oder espressif zu identifizieren. Alternativ kann auch das Netzwerk recht einfach mit nmapnach Geräten durchsucht werden, die auf Port 502 (Modbus) lauschen: daniel@rechner ~ % nmap -p502 --open 192.168.178.1/24 Starting Nmap 7.92 ( https://nmap.org ) at 2022-10-10 13:33 CEST Nmap scan report for espressif.fritz.box (192.168.178.85) Host is up (0.13s latency). PORT STATE SERVICE 502/tcp open mbap Nmap scan report for espressif-sungrow.fritz.box (192.168.178.89) Host is up (0.22s latency). PORT STATE SERVICE 502/tcp open mbap Nmap done: 256 IP addresses (24 hosts up) scanned in 49.12 seconds daniel@rechner ~ % Auch hier fördert der Scan zwei IPs zu Tage. Welche die richtige ist, offenbart ein einfacher Test: Ruft ihr die IP-Adresse im Browser auf und euch wird ein Setup-Assistent angezeigt, seit ihr mit dem WLAN-Stick verbunden - die IP ist also nicht die richtige für die Modbus-Verbindung. ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:3:2","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Verbindungsfehler Gefürchtet sind Modbus-Fehler wie error: modbus.0 (21335) Client in error state. warn: modbus.0 (21335) Poll error count: 1 code: {\"err\":\"timeout\",\"timeout\":5000} oder in meinem Fall auch gerne On error: {\"errno\":-104,\"code\":\"ECONNRESET\",\"syscall\":\"read\"} im Iobroker-Protokoll. Eine genaue Ursache scheint nicht immer ersichtlich, empfohlen werden folgende Maßnahmen: Penible(!) Prüfung der Konfiguration Sicherstellen dass die Read- und Write-Register keine Fehler enthalten (ggf. alle bis auf ein Register probeweise entfernen) Neuinstallation des Modbus-Adapters (Konfiguration, insb. Register vorher sichern / kopieren) Neustart Wechselrichter Aktualisierung Firmware Wechselrichter Umstecken das Kabels in anderen Switch-Port (in meinem Fall Zyxel, ggf. haben die vielen MODBUS Anfragen ein Limit gerissen?) =\u003e Hat reproduzierbar und mit sofortiger Wirkung zu einer Wiederherstellung der Verbindung geführt ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:3:3","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Reduzierung von Abfrageintervallen und Registeranzahl Gerade wenn die Verbindung nach einigen Tagen abbricht und durch Wahl eines anderen LAN-Ports am Router/Switch wiederhergestellt werden kann, sollte geprüft werden, ob nicht ggf. eine zu große Zahl an Registern in zu kurzer Zeit gelesen wird. Mögliche Abhilfe: Reduzierte Anzahl an Registern (Beispiel Gist / RAW) Reduzierte Anzahl an Lese- und Schreiboperationen im Modbus-Adapter durch Anpassung der Konfigirationen Leseinterval, Wartezeit ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:3:4","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Jetzt wird ausgelesen! Ist der WR korrekt in IoBroker eignebunden, ist die Freude zu nächst groß. Register wie 5016 Total DC Power 13007 Load power 13009 Export power 13021 Battery power versprechen schnelle Erfolge. Allerdings stehen nicht alle Werte, die in der App ersichtlich sind, auch direkt zum Auslesen zur Verfügung: Im obigen Bild ist bspw. ersichtlich, dass die Last des Hauses mit 83 W aus der PV-Anlage sowie 133 W aus dem Akku bedient wird. Weiterhin speist der Akku mit 2,003 kW ins Netz ein (es handelt sich hierbei um eine Kalibrierung des AKkus, ansonsten tritt der Fall natürlich nicht auf). Mit den Informationen in den o.g. Registern ist lediglich ersichtlich, dass 83 W PV-Strom erzeugt werden, die Batterie eine Last von 2,136 kW hat und ins Netz 2,003 kW eingespeist werden und im Haus eine Last von 216 W anfällt. Wie die Ströme sich genau verteilen ist über die Register nicht ersichtlich. Um diese Information zu ermitteln werden die sog. “Running States” benötigt. ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:4:0","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"13000_Running_State Im Register 13000 “Running State” findet sich der aktuelle Betriebsstatus des Wechselrichters. Hierbei handelt es sich um eine Bitmaske die folgende Informationen kodiert: Bit0 PV power Bit0 == 0 No power generated from PV Bit0 == 1 Power generated from PV Bit1 Battery charging Bit1 == 0 Not charging Bit1 == 1 Charging Bit2 Battery discharging Bit2 == 0 Not discharging Bit2 == 1 Discharging Bit3 Positive load power Bit3 == 0 Load is reactive Bit3 == 1 Load is active Bit4 Feed-in power Bit4 == 0 No power feed-in the grid Bit4 == 1 Power feed-in the grid Bit5 Import Power from grid Bit5 == 0 No power imported from the grid Bit5 == 1 Importing power from grid Bit6 Reserved Bit6 Bit7 (Refitting System) Negative load power Bit7 == 0 No power generated from “Load” Bit7== 1 Power generated from “Load” Mit dieser Information ist es bspw. erst möglich direkt zu ermitteln, ob die Batterie entlädt (Bit 3 ist 1) oder lädt (Bit 2 ist 1). Gleichzeitig kann hiermit ermittelt werden, ob bspw. gerade wirklich ins Netz eingespeist wird (Bit 4 ist 1) oder ob die in Register 13009 Export power verzeichnet 3 W nur ein Overshoot aus der Batterie sind (Bit 4 ist 0). Da die Bitmaske in IoBroker als Dezimalwert dargestellt wird (bspw. 25) kursieren einige Beispiele in denen auf diese Werte geprüft wird. Korrekt ist es allerdings so nicht. Folgende JS Funktion kann in Blockly eingebunden werden um zu prüfen, ob ein bestimmtes Bit gesetzt ist: function decToBit(dec, bitPosition) { return (dec \u0026 (1 \u003c\u003c bitPosition)) === 0 ? false : true; } Nun kann wie folgt geprüft werden, ob die Batterie lädt oder entlädt: $runningState = getState(\"modbus.0.inputRegisters.13000_Running_State\").val; $batteryCharging = decToBit($runningState, 1); $batteryDischarging = decToBit($runningState, 2); ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:4:1","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Wohin fließt der Strom? Um mit dieser neuen Information tatsächlich zu bestimmen, von wo nach wo der Strom fließt, sind weitere Überlegungen nötig. Hierzu lässt sich folgende Priorisierung aufstellen: PV Strom speist zunächst die Hauslast dann die Batterie Rest wird ins Netz eingespeist Strom aus der Batterie speist zunächst die Hauslast dann das Netz (bspw. Kalibrierung) Strom aus dem Netz speist zunächst die Hauslast dann die Batterie (bspw. Kalibrierung) Folgendes Javascript übersetzt das Ganze in Code für IoBroker. function decToBit(dec, bitPosition) { return (dec \u0026 (1 \u003c\u003c bitPosition)) === 0 ? false : true; } // Creates a state if it does not exist yet function createStateIfNotExists(state, name) { if ( !existsState(state )) { createState(state, 0, false, {name: name, type: \"number\", role: 'value'}, function () {}); } } // Create states createStateIfNotExists(\"0_userdata.0.PV.PvToLoad\", \"Power from PV to load\"); createStateIfNotExists(\"0_userdata.0.PV.PvToBat\", \"Power from PV to bat\"); createStateIfNotExists(\"0_userdata.0.PV.PvToGrid\", \"Power from PV to grid\"); createStateIfNotExists(\"0_userdata.0.PV.BatToLoad\", \"Power from Bat to load\"); createStateIfNotExists(\"0_userdata.0.PV.BatToGrid\", \"Power from Bat to grid\"); createStateIfNotExists(\"0_userdata.0.PV.GridToLoad\", \"Power from grid to load\"); createStateIfNotExists(\"0_userdata.0.PV.GridToBat\", \"Power from Gridto battery\"); // Decode running state flags $powerGeneratedFromPV = decToBit(dec, 0); $batteryCharging = decToBit(dec, 1); $batteryDischarging = decToBit(dec, 2); $loadActive = decToBit(dec, 3); $powerFeedIntoGrid = decToBit(dec, 4); $powerImportFromGrid = decToBit(dec, 5); $powerGeneratedFromLoad = decToBit(dec, 7); // Save running state more speaking fields setState(\"0_userdata.0.PV.PowerGeneratedFromPV\", $powerGeneratedFromPV, true); setState(\"0_userdata.0.PV.BatteryCharging\", $batteryCharging, true); setState(\"0_userdata.0.PV.BatteryDischarging\", $batteryDischarging, true); setState(\"0_userdata.0.PV.LoadActive\", $loadActive, true); setState(\"0_userdata.0.PV.PowerFeedIntoGrid\", $powerFeedIntoGrid, true); setState(\"0_userdata.0.PV.PowerImportFromGrid\", $powerImportFromGrid, true); setState(\"0_userdata.0.PV.PowerGeneratedFromLoad\", $powerGeneratedFromLoad, true); // Read current power levels of bat, pv, load and grid $load = getState(\"modbus.0.inputRegisters.13007_Load_power_\").val; $grid = getState(\"modbus.0.inputRegisters.13009_Export_power\").val; $pv = getState(\"modbus.0.inputRegisters.5016_Total_DC_Power\").val; getState(\"modbus.0.inputRegisters.13021_Battery_power_\").val; // Calculate PV $pvToBat = 0; $pvToLoad = 0; $pvToGrid = 0; $loadRemaining = $load; if ($powerGeneratedFromPV) { $remaining = $pv; if ($remaining \u003e $loadRemaining) { $pvToLoad = $loadRemaining; $remaining -= $load; $loadRemaining = 0; } else { $pvToLoad = $remaining; $loadRemaining = $load - $remaining; $remaining = 0; } if ($batteryCharging) { if ($remaining \u003e $battery) { $pvToBat = $battery; $remaining -= $battery; } else { $pvToBat = $remaining; $remaining = 0; } } if ($grid \u003e 0) { $pvToGrid = $remaining; } } setState(\"0_userdata.0.PV.PvToLoad\", $pvToLoad); setState(\"0_userdata.0.PV.PvToBat\", $pvToBat); setState(\"0_userdata.0.PV.PvToGrid\", $pvToGrid); // Calculate Bat $batToLoad = 0; $batToGrid = 0; if ($batteryDischarging) { $remaining = $battery; if ($remaining \u003e $loadRemaining) { $batToLoad = $loadRemaining; $remaining -= $loadRemaining; $loadRemaining = 0; } else { $batToLoad = $remaining; $loadRemaining -= $remaining; $remaining = 0; } if ($powerFeedIntoGrid) { $batToGrid = $remaining; } } setState(\"0_userdata.0.PV.BatToLoad\", $batToLoad); setState(\"0_userdata.0.PV.BatToGrid\", $batToGrid); // Calculate grid $gridToBat = 0; $gridToLoad = 0; if ($grid \u003c 0) { $remaining = Math.abs($grid); if ($remaining \u003e $loadRemaining) { $gridToLoad = $loadRemaining; $remaining -= $loadRemaining; $loadRemaining = 0; } else { $gridToLoad = $remaining; $loadRemaining -= $remaining; $remaining = 0; } if (","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:4:2","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Regelverluste Auch wenn über die Running States sehr klar ersichtlich ist, ob gerade ins Netz eingespeist oder der Akku geladen wird: Regelverluste (also bspw. kurzzeitge Einspeisungen aus dem Akku ins Netz, die entstehen weil die Last im Haus schneller abgefallen ist als der Akku abregeln konnte) werden über die Running States nicht immer korrekt wiedergegeben. Insofern kann es sinnvoll sein davon auszugehen, dass die 30W, die vom Akku abgehen und nicht mehr zur Hauslast passen, eben doch ins Netz gehen - selbst wenn Bit 4 (power feed in) nicht gesetzt ist. ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:4:3","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Datenschutz Diese Datenschutzerklärung soll die Nutzer der Webseite über Art, Umfang und Zweck der erhobenen personenbezogenen Daten informieren. ","date":"0001-01-01","objectID":"/data-privacy/:1:0","tags":null,"title":"","uri":"/data-privacy/"},{"categories":null,"content":"Zugriffsdaten Beim Aufrufen von Seiten auf dieser Webseite werden automatisch Zugriffsdaten protokolliert (sog. Server-Logfiles). Dazu gehören: Besuchte Seiten Zeitpunkt des Zugriffs Größe der gesendeten Daten Quelle des Zugriffs (sog. Referer) Genutzter Browser Genutztes Betriebsystem IP Die so erhobenen Daten werden nach 7 Tage gelöscht. Die Erhebung dieser Daten ist unter anderem aus Sicherheitsgründen erforderlich um beispielsweise Angriffe auf die Webseite analysieren zu können. ","date":"0001-01-01","objectID":"/data-privacy/:1:1","tags":null,"title":"","uri":"/data-privacy/"},{"categories":null,"content":"Trackboxx Zur Reichweitenmessung der Seite wird der Service “Trackboxx” genutzt. Durch die Trackboxx-Dienste werden Daten, Eigenschaften und Aktivitäten von Nutzern im Hinblick auf die Nutzung von dieser Seite erfasst, verarbeitet oder gespeichert. Art der personenbezogenen Daten (gem. Art. 4 Nr. 1 DS-GVO): IP-Adresse (verschlüsselt/gekürzt, für max. 24 Stunden) Pseudonyme Nutzer-ID (verschlüsselter Wert, der Schlüssel wird alle 24 Stunden verändert) Browserdaten: Art und Version des Browsers Art des Endgerätes (Desktop, Tablet, Mobil) referenzierende Webseite Flüchtige Daten wie Herkunftsland, Bildschirmauflösung, Zugriffszeitpunkt oder Zeitzone ","date":"0001-01-01","objectID":"/data-privacy/:1:2","tags":null,"title":"","uri":"/data-privacy/"},{"categories":null,"content":"Kontakt bei Fragen Bei Fragen zum Datenschutz auf dieser Seite wenden Sie sich gerne an mich: fragen-zum-datenschutz@post.noegelmail.de ","date":"0001-01-01","objectID":"/data-privacy/:1:3","tags":null,"title":"","uri":"/data-privacy/"},{"categories":null,"content":"Impressum ","date":"0001-01-01","objectID":"/imprint/:0:0","tags":null,"title":"","uri":"/imprint/"}]