[{"categories":null,"content":"In this simple project I want to build a box that allows my children to enter the house with a fingerprint sensor. At the same time this project doubles as a prototype for video doorbell with fingerprint sensor that I might want to build later. ","date":"2022-12-07","objectID":"/posts/2022-12-07-fingerprint-doorlock/:0:0","tags":null,"title":"Opening my front door with a fingerprint sensor","uri":"/posts/2022-12-07-fingerprint-doorlock/"},{"categories":null,"content":"Prerequisites In my case we are owning a Nuki door lock already: So basically a small box on the inside of my front door that turns the door key when told so via Bluetooth. In my case I am also using the so-called ‚ÄúNuki Bridge‚Äù: That again is a small box in the hallway that can be told via API to tell the small box on the front door via Bluetooth to turn the key. What a wonderful new world! The idea of this project is simple: I will connect a R503 sensor with an ESP32, that will then (if a valid fingerprint is detected) send that API request to the Nuki bridge. Similar should be possible for any other smart door lock that has some kind of API. To my understanding it should even work without the Nuki bridge as the ESP32 could also directly communicate with the Nuki door lock via Bluetooth API. Examples for this are projects such as NukiBleEsp32 or Nuki_Hub. Long story short, you need: an API enabled smart door lock an ESP32 (or another microcontroller that has (depending on your door lock) Wifi or Bluetooth connectivity) a R503 fingerprint sensor ","date":"2022-12-07","objectID":"/posts/2022-12-07-fingerprint-doorlock/:1:0","tags":null,"title":"Opening my front door with a fingerprint sensor","uri":"/posts/2022-12-07-fingerprint-doorlock/"},{"categories":null,"content":"The project build Everyone in the software industry knows: Nothing holds longer than a prototype. So I decided to invest some extra effort to make the box for the fingerprint sensor ‚Äúsomewhat nice‚Äù. It ended up being more on the beefy sides of things‚Ä¶ but it serves its purpose. Gluing the box Bringing the pieces together As the wood was a bit thick, I had to drill a countersink hole. The wiring is quite easy, as the r503 sensor uses UART. Wires 5 \u0026 6 (blue/white) are not needed in my case. ","date":"2022-12-07","objectID":"/posts/2022-12-07-fingerprint-doorlock/:2:0","tags":null,"title":"Opening my front door with a fingerprint sensor","uri":"/posts/2022-12-07-fingerprint-doorlock/"},{"categories":null,"content":"A word of warning Warning Even though capacitive fingerprint sensors and especially R503 seem to be reasonable well proven: Putting it out there and running home-brewed software to decide if someone should enter your house or not is per se‚Ä¶ dumb an idea worth careful consideration. Some possible pitfalls are: If the box is accessible an attacker could swap the sensor with an own, preconfigured one (as the fingerprints are stored on the R503). Therefor you should make use of the password functionality of the sensor. Make use of the confidence value of the sensor: Only open the door if the sensor is confidence enough about the match. The so called FAR (False Acceptance Rate) indicated how likely it is, that the sensor will mistake two different fingers for the same. For R503 I found values such as \u003c0.001% - which is one out of 100.000. There could be other attacks to the sensor that I am not aware of. There could be stupid programming mistakes that I am not aware of. It could therefore also make sense to think twice about: if to use this system at all where to place it and how visible it should be deactivating it for longer journeys making it only usable in certain time windows ensuring that the ESP is not accessible ","date":"2022-12-07","objectID":"/posts/2022-12-07-fingerprint-doorlock/:3:0","tags":null,"title":"Opening my front door with a fingerprint sensor","uri":"/posts/2022-12-07-fingerprint-doorlock/"},{"categories":null,"content":"The project The actual wiring is quite easy: The R503 just needs 3.3V from the ESP32 and ground for power supply. Additionally, I connected the yellow TXD Pin of the R503 to P17 Pin of the ESP32 and the brown (sometimes also green) RXD Pin of the R503 to the P16 Pin of the ESP32. Using the library manager of the Arduino IDE it is quite simple to use the Adafruit Fingerprint Sensor Library. It also includes a lot of examples for registering new fingerprints, checking fingerprints etc. The main logic of this project so mainly is arranging this examples in a way that you can trigger a ‚Äúnew finger registration‚Äù by putting your ‚Äúadmin‚Äù finger on the sensor for some longer time. The sensor then blinks and will tell you to show the new finger two times. After that the sensor stores the finger hash internally and will be able to identify the finger in the future. Undoubtedly the bue masking tape adds a lot of charm to the box. The rest then again is simple: If the sensor sees a know finger, it will trigger an API Call that - you might guess it - will tell my Nuki bridge via HTTP to tell the Nuki door lock via Bluetooth to turn the key a few times. The door jumps open - and in walk 2 joyfully squealing kids with muddy boots and run with them through the house. With regard to my idea to let the kids in unguarded I just can say: Be careful what you wish for. As always the code can be found on Github. ","date":"2022-12-07","objectID":"/posts/2022-12-07-fingerprint-doorlock/:4:0","tags":null,"title":"Opening my front door with a fingerprint sensor","uri":"/posts/2022-12-07-fingerprint-doorlock/"},{"categories":null,"content":"I broke the hotend of my Genius Pro - and decided to exchange the entire extruder with the ‚Äúall metal‚Äù one. This is a short overview. ","date":"2022-11-05","objectID":"/posts/2022-11-05-replace-genius-pro-extruder/:0:0","tags":null,"title":"Replace Genius Pro Extruder","uri":"/posts/2022-11-05-replace-genius-pro-extruder/"},{"categories":null,"content":"How it started Some month ago I learned about the new arachne perimeter generator. It is now possible to generate wider or thinner perimeter as it is needed. And I wondered: Will this allow me to print (almost) same quality prints with bigger nozzle sizes? So I replaced my .4 nozzle with a .6 nozzle and went for it. ","date":"2022-11-05","objectID":"/posts/2022-11-05-replace-genius-pro-extruder/:1:0","tags":null,"title":"Replace Genius Pro Extruder","uri":"/posts/2022-11-05-replace-genius-pro-extruder/"},{"categories":null,"content":"How it went Even though I didn‚Äôt notice much of a difference with the first few prints: Over time the prints became worse; I considered fine-tuning some print parameters as different nozzle sizes would probably also result in other extrusion rates, retract values etc. However, it does not seem to be too dramatic - so I went with it for some time. Which was a mistake. After degrading print quality for a longer time, this print motivated me to investigate Especially the stringing was something I wanted to fix. I varied hotend temperature, retraction and flow rate. After a print with bad stringing and a lot of other issues motivated me to investigate that topic, I started printing some test prints with the goal to reduce stringing. Temperature, retraction, flow rate‚Ä¶ non of these typical candidates yielded improvements. I decided to check the hotend - as a plugged nozzle and similar issues can also cause that kind of issues: I finally decided to check the hotend and found a mess - which I didn't excactly improve when trying to fix it. But also the ball bearings of the extruder gear‚Ä¶ looked a bit worn out. The picture above doesn‚Äôt even tell the whole story: The hotend was completely coated with filament. And when I started removing parts of the filament, I even managed to rip of the control cable. And let‚Äôs put it that way: A part of the nozzle also decided to stay with the hotend‚Ä¶ What a success üéâ. ","date":"2022-11-05","objectID":"/posts/2022-11-05-replace-genius-pro-extruder/:2:0","tags":null,"title":"Replace Genius Pro Extruder","uri":"/posts/2022-11-05-replace-genius-pro-extruder/"},{"categories":null,"content":"How it ended I thought about replacing just the hotend honestly - you usually get it for around 20‚Ç¨. At the same time I was wondering if I couldn‚Äôt easily swap the extruders and at the same time fix some other issues such as the cheap plastic extruder lever of the default extruder or the limited temperature capacity. So I went with the ‚ÄúFull Metal Extruder‚Äù that is offered by Artillery - and which I found discounted. The extruder can be replaced with just three screws - and so after a few days, the new extruder was mounted. New all metal extruder mounted to the Genius Pro. Even though not yet perfectly dialed in: The stringing improved a lot right away. The first prints also looked promissing. ","date":"2022-11-05","objectID":"/posts/2022-11-05-replace-genius-pro-extruder/:3:0","tags":null,"title":"Replace Genius Pro Extruder","uri":"/posts/2022-11-05-replace-genius-pro-extruder/"},{"categories":null,"content":"Developing Arduino boards is actually easier than one might think. You plug the development board onto your computer‚Äôs USB, fire up Arduino IDE, and with just a few key strokes and clicks you can upload a first sketch to your development board. But what do you do if you just finished a more complex project and your development board is hard to reach in a door bell, water tank or robot you built? ","date":"2022-11-01","objectID":"/posts/2022-11-01-arduino-auto-update/:0:0","tags":null,"title":"Update ESP32 over the air","uri":"/posts/2022-11-01-arduino-auto-update/"},{"categories":null,"content":"Arduino OTA Arduino also supports so-called ‚Äúover the air‚Äù (OTA) updates. These allow you to flash a new sketch to your development board via Wifi. For this you need the library ArduinoOTA and a Wifi-enabled development board. For the ESP32 board - which I am using - this dependency is already in the development libraries of that board. First upload needs to happen via Serial After that Arduino IDE will find the network device automatically For the first upload the password needs to be entered Upload progress ","date":"2022-11-01","objectID":"/posts/2022-11-01-arduino-auto-update/:1:0","tags":null,"title":"Update ESP32 over the air","uri":"/posts/2022-11-01-arduino-auto-update/"},{"categories":null,"content":"The Sketch In order to make basically every Arduino Sketch OTA compatible, you just need to implement the setupWebUpdater function shown below and call it from your setup function. Furthermore, your need to make sure to call ArduinoOTA.handle() in every execution of the loop function. As we don‚Äôt want everyone in our network to be able to easily flash new updates, we will define a password for the OTA updates: The password is provided as an MD5 hash (please remember: MD5 is not a good choice for hashing passwords). You can generate your hash easily by running e.g. echo -n \"MySecretPassword\"|md5 in your terminal. #include \u003cWiFi.h\u003e #include \u003cESPmDNS.h\u003e #include \u003cWiFiUdp.h\u003e #include \u003cArduinoOTA.h\u003e #define WIFI_SSID \"YOUR-WIFI-SSID\" #define WIFI_PASSWORD \"YOUR-WIFI-PASSWORD\" #define OTA_HASH \"7315a012ecad1059a3634f8be1347846\" // echo -n \"MySecretPassword\"|md5 void setup() { Serial.begin(9600); WiFi.setHostname(\"OTAExample\"); WiFi.begin(WIFI_SSID, WIFI_PASSWORD); Serial.print(\"Connecting to \"); Serial.println(WIFI_SSID); while (WiFi.status() != WL_CONNECTED) { delay(500); Serial.print(\".\"); } Serial.println(\"\"); Serial.println(\"WiFi connected. IP address: \"); Serial.println(WiFi.localIP()); setupWebUpdater(); } void loop() { // your logic ArduinoOTA.handle(); delay(250); } void setupWebUpdater(void) { ArduinoOTA.setHostname(\"OTAExample\"); ArduinoOTA.setPasswordHash(OTA_HASH); ArduinoOTA .onStart([]() { String type; if (ArduinoOTA.getCommand() == U_FLASH) type = \"sketch\"; else // U_SPIFFS type = \"filesystem\"; // NOTE: if updating SPIFFS this would be the place to unmount SPIFFS using SPIFFS.end() Serial.println(\"Start updating \" + type); }) .onEnd([]() { Serial.println(\"\\nEnd\"); }) .onProgress([](unsigned int progress, unsigned int total) { Serial.printf(\"Progress: %u%%\\r\", (progress / (total / 100))); }) .onError([](ota_error_t error) { Serial.printf(\"Error[%u]: \", error); if (error == OTA_AUTH_ERROR) Serial.println(\"Auth Failed\"); else if (error == OTA_BEGIN_ERROR) Serial.println(\"Begin Failed\"); else if (error == OTA_CONNECT_ERROR) Serial.println(\"Connect Failed\"); else if (error == OTA_RECEIVE_ERROR) Serial.println(\"Receive Failed\"); else if (error == OTA_END_ERROR) Serial.println(\"End Failed\"); }); ArduinoOTA.begin(); } ","date":"2022-11-01","objectID":"/posts/2022-11-01-arduino-auto-update/:2:0","tags":null,"title":"Update ESP32 over the air","uri":"/posts/2022-11-01-arduino-auto-update/"},{"categories":null,"content":"Summary I like this approach quite a lot: It doesn‚Äôt add too much boilerplate to the sketch and therefore can become a default part of all your projects. There is even a ‚ÄúOTA Web Updater‚Äù example in the ‚ÄúArduinoOTA‚Äù package - but that approach adds a lot of clutter and is less automated as it cannot be triggered directly from the ArduinoIDE. ","date":"2022-11-01","objectID":"/posts/2022-11-01-arduino-auto-update/:3:0","tags":null,"title":"Update ESP32 over the air","uri":"/posts/2022-11-01-arduino-auto-update/"},{"categories":null,"content":"Die Frage Eignet sich mein Altbau eigentlich f√ºr eine W√§rmepumpe hat sich vermutlich fast jeder Altbaubesitzer schon gestellt. Im Netz finden sich allerlei Horrorgeschichten von elektrischen Heizpatronen und der angeblichen Notwendigkeit von Fu√übodenheizungen. Es gibt zum Gl√ºck M√∂glichkeiten, das Ganze n√§herungsweise vorab zu bestimmen. Die wollen wir uns im Folgenden anschauen. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizung/:0:0","tags":null,"title":"Heizlastberechnung - Teil 3: Eignen sich meine Heizk√∂rper f√ºr eine W√§rmepumpe?","uri":"/posts/2022-10-29-heizung/"},{"categories":null,"content":"Mehr zu dieser Reihe In diesem dritten Teil meiner Reihe ‚ÄúHeizlastberechnung‚Äù geht es um die Berechnung der Leistung von Heizk√∂rpern - und die Frage, ob die Heizk√∂rper ausreichend dimensioniert sind. Hier geht es zu den anderen Teilen. Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermitteln Heizlastberechnung - Teil 3: Eignen sich meine Heizk√∂rper f√ºr eine W√§rmepumpe? ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizung/:1:0","tags":null,"title":"Heizlastberechnung - Teil 3: Eignen sich meine Heizk√∂rper f√ºr eine W√§rmepumpe?","uri":"/posts/2022-10-29-heizung/"},{"categories":null,"content":"Eignet sich mein Haus f√ºr eine W√§rmepumpe? Direkt vorweg: Nein, man ben√∂tigt nicht zwingend Fu√übodenheizungen und ja, auch Altbauten kann man mit W√§rmepumpen betreiben ohne sich in den finanziellen Ruin zu st√ºrzen. Bestimmen l√§sst sich das √ºber die sogenannte ‚ÄúJahresarbeitszahl‚Äù (JAZ): Diese gibt an, wieviel kWh W√§rmeenergie je investierter Kilowattstunde Strom die W√§rmepumpe zur Verf√ºgung stellt. Teilen wir den Heizw√§rmebedarf des Hauses durch die JAZ, wissen wir, wie viel Strom die W√§rmepumpe ben√∂tigt. Hier einige Beispiele: Szenario 2020 Heizw√§rmebedarf 16.000kWh Stromkosten: 0,26‚Ç¨/kWh Gaskosten: 0,06‚Ç¨/kWh JAZ Strombedarf WP Kosten Gasheizung/Jahr Kosten Strom/Jahr 3 5.333 960‚Ç¨ 1.386‚Ç¨ 3,5 4.571 960‚Ç¨ 1.188‚Ç¨ 4 4.000 960‚Ç¨ 1.040‚Ç¨ 4,5 3.555 960‚Ç¨ 924‚Ç¨ Szenario 2022 Heizw√§rmebedarf 16.000kWh Stromkosten: 0,68‚Ç¨/kWh Gaskosten: 0,23‚Ç¨/kWh JAZ Strombedarf WP Kosten Gasheizung/Jahr Kosten Strom/Jahr 3 5.333 3.680‚Ç¨ 3.626‚Ç¨ 3,5 4.571 3.680‚Ç¨ 3.108‚Ç¨ 4 4.000 3.680‚Ç¨ 2.720‚Ç¨ 4,5 3.555 3.680‚Ç¨ 2.417‚Ç¨ Man sieht: Bei den g√ºnstigen Gaspreisen der Vorjahre waren schon gute Jahresarbeitszahlen von 4 und besser n√∂tig, um mit der W√§rmepumpe bei den Gaspreisen gleichzuziehen - und das bei h√∂heren Anschaffungskosten. Bei den aktuellen Gas- und Strompreisen sieht die Rechnung schon anders aus: Schon mit einer JAZ von 3 zieht die W√§rmepumpe bei den laufenden Kosten etwa gleich und √ºberholt die Gasheizung sogar. Nun gibt es im Jahr 2022 (und dar√ºber hinaus) neben den reinen Energiekosten sicher noch andere gute Gr√ºnde, in eine W√§rmepumpe zu investieren: Versorgungssicherheit, Preisentwicklung, √∂kologische Erw√§gungen‚Ä¶ wir verstehen ‚ÄúEignung‚Äù hier erstmal eher wirtschaftlich. Das Problem bei diesen ganzen Gedankenspielen: Die Jahresarbeitszahl kennt man erst, wenn die W√§rmepumpe schon ein Jahr im Betrieb ist. Und Laborwerte wie der sagenumwobene (S)COP haben generell wenig Aussagekraft - noch weniger im Altbau. Um nun dennoch auf eine m√∂glichst hohe JAZ spekulieren zu k√∂nnen, muss der Altbau einige Grundlagen erf√ºllen: M√∂glichst geringe Heizlast, d.h. geringer W√§rmebedarf je m¬≤ Den Vorlauftemperaturen der Heizung Der Heizlast haben wir uns in Teil 1 dieser Reihe: Heizlast eines Raumes und Hauses ermitteln ausgiebig gewidmet. Hier geht es nun um die Vorlauftemperaturen. Grob gesagt: Je niedriger die Vorlauftemperatur der Heizung, desto weniger Arbeit muss die W√§rmepumpe leisten, um diese zu erreichen, desto besser die JAZ, desto geringer die Kosten. Das ist auch der Grund, warum alle Welt Fu√übodenheizungen und W√§rmepumpen miteinander kombiniert: Fu√übodenheizungen ben√∂tigen nur um die 30¬∞C Vorlauftemperatur - alte Heizungen sind oftmals auf 75¬∞C eingestellt. Ein gigantischer Unterschied f√ºr die Effizient der W√§rmepumpe. Wir widmen uns hier also der Frage: Kann ich die Vorlauftemperatur meiner Heizung reduzieren - ohne dass die Bude kalt bleibt? Im Bild zu sehen: In fast allen R√§umen ist die Leistung auch bei einer Vorlauftemperatur von 55¬∞C ausreichend - und in fast keinem Raum bei einer Vorlauftemperatur von 45¬∞C. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizung/:2:0","tags":null,"title":"Heizlastberechnung - Teil 3: Eignen sich meine Heizk√∂rper f√ºr eine W√§rmepumpe?","uri":"/posts/2022-10-29-heizung/"},{"categories":null,"content":"Messen √ºber Reduzierung der Vorlauftemperatur Die Variante mit der wohl h√∂chsten Aussagekraft: Die Vorlauftemperatur des bestehenden Heizkessels wird auf 55¬∞C runterreguliert - nach einem knackigen Winter wissen wir genau, ob die Heizk√∂rper damit in den R√§umen weiterhin wohlige W√§rme bereitstellen konnten. Die Nachteile dieser Variante: Zeitintensiv: Idealerweise eine Heizperiode, mindestens jedoch einige knackig kalte Tage um die Normauslegungstemperatur herum (beispielsweise -9¬∞C). Kein ad hoc Ersatz: Ist der Heizkessel defekt, hat man mit dieser Variante keine Chance mehr zu ermitteln, ob die Vorlauftemperaturen ausreichen Der Vorlauf der Heizung muss umgestellt werden. Abh√§ngig vom Modell kann dies mit mehr oder weniger Aufwand (Handbuch besorgen, Eigenwillige Tastensteuerung meistern) verbunden sein Gerade bei alten Anlagen mit schlecht eingestelltem hydraulischem Abgleichen, schlecht ged√§mmten Rohren und alten Zirkulationspumpen bleiben bei dieser Variante m√∂glicherweise naheliegende Optimierungspotenziale unber√ºcksichtigt. Die Vorteile: Wenn selbst im tiefsten Winter der Wohnbereich warm ist und selbst die Handtuchheizung im Bad noch ihr Werk verrichtet hat man einen Etwaige Effizienz- und W√§rmeverluste der Heizanlage sind bereits ber√ºcksichtigt ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizung/:2:1","tags":null,"title":"Heizlastberechnung - Teil 3: Eignen sich meine Heizk√∂rper f√ºr eine W√§rmepumpe?","uri":"/posts/2022-10-29-heizung/"},{"categories":null,"content":"Heizlastberechnung \u0026 Heizk√∂rperleistung Plattenheizk√∂rper vom Typ 22 Zwei Konvektionsbleche zwischen zwei Platten in einem Heizk√∂rper Typ 22 Drei Konvektionsbleche zwischen drei Platten in einem Heizk√∂rper Typ 33 Die zweite Methode f√ºhrt √ºber die Heizlastberechnung: Im Rahmen dieser haben wir bereits die Heizlast jedes Raumes einzelnd berechnet; unser Beispiel-Raum mit 23m¬≤ hat beispielsweise eine Heizlast von 1049W. Der vorhandene Heizk√∂rper sollte nun mindestens diese Leistung bereitstellen k√∂nnen - f√ºr eine W√§rmepumpe bei 55¬∞C Vorlauf oder weniger. Ich gehe im Folgenden von sogenannten Plattenheizk√∂rpern aus: Noch √§ltere R√∂hrenheizk√∂rper sind in der Regel nicht effizient bei niedrigeren Vorlauftemperaturen zu betreiben. Die Leistung eines Heizk√∂rpers wird in der Regel bestimmt vom Heizk√∂rpertyp, sowie seiner H√∂he und Breite. Bei Plattenheizk√∂rpern werden folgende Typen unterschieden: Typ 11: Eine Platte, ein Konvektionsblech Typ 20: Zwei Platten, kein Konvektionsblech Typ 21: Zwei Platten, ein Konvektionsblech Typ 22: Zwei Platten, zwei Konvektionsbleche Typ 30: Drei Platten, kein Konvektionsblech Typ 33: Drei Platten, drei Konvektionsbleche Mit einem Blick oben in den Heizk√∂rper l√§sst sich also bestimmen, um welchen Typ es sich handelt. Werden nun noch Breite und H√∂he ausgemessen, haben wir alle Informationen, die zur Berechnung der W√§rmeleistung ben√∂tigt werden. Dazu gibt es entsprechende Tabellen im Netz, die konsultiert werden k√∂nnen, beispielsweise diese vom Gro√ühandel f√ºr Reha und Haustechnik (Tabelle 1) oder diese √úbersicht f√ºr Bruderus Heizk√∂rper (Tabelle 2). In unserem Beispiel-Wohnzimmer gibt es einen Heizk√∂rper Typ 33 mit einer Breite von 1600mm und einer H√∂he von 600mm. Gem√§√ü den beiden zuvor verlinkten √úbersichten hat einer dieser Heizk√∂rper folgende Leistungserte: Vorlauf/R√ºcklauf Wert lt. Tabelle 1 Wert lt. Tabelle 2 55¬∞C/45¬∞C 2021W 1891W 70¬∞C/55¬∞C 3231W 3000W Die Abweichung der Werte liegt nur bei etwa 7%. In allen F√§llen liegt die W√§rmeleistung des Heizk√∂rpers √ºber den n√∂tigen 1049W Heizlast des Raumes. Das ist in Altbauten durchaus h√§ufig anzutreffen, da die Heizk√∂rper fr√ºher oftmals eher nach optischen Gesichtspunkten (‚Äúpasst unter das Fenster‚Äù) ausgew√§hlt wurden und daher h√§ufig √ºberdimensioniert sind. F√ºhren wir diese Analyse f√ºr jeden Raum durch, kennen wir die Heizlast des Raumes - und die W√§rmeleistung der Heizk√∂rper. Ist die W√§rmeleistung des Heizk√∂rpers gr√∂√üer als die Heizlast, wird es in diesem Raum voraussichtlich zu keinen Problemen bei der Reduzierung der Vorlauftemperaturen kommen. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizung/:2:2","tags":null,"title":"Heizlastberechnung - Teil 3: Eignen sich meine Heizk√∂rper f√ºr eine W√§rmepumpe?","uri":"/posts/2022-10-29-heizung/"},{"categories":null,"content":"Exkurs: W√§rmeleistung umrechnen Die W√§rmeleistung der Heizk√∂rper ist standardisiert f√ºr bestimmte Szenarien: In der Regel sind die Werte f√ºr 20¬∞C Raumtemperatur angegeben - und f√ºr bestimmte Vorlauf- und R√ºcklauftemperaturen. Es ist aber auch m√∂glich, eine bekannte W√§rmeleistung (bspw. 70¬∞C Vorlauf, 55¬∞C R√ºcklauf, 20¬∞C Raumtemperatur) eines Heizk√∂rpers auf ein Wunschszenario umzurechnen, beispielsweise auf 45¬∞C Vorlauf, 35¬∞C R√ºcklauf und 22¬∞C Raumtemperatur. So l√§sst sich auch √ºberschlagen, ob die Vorlauftemperatur noch weiter reduziert werden kann. Leistung = normLeistung * ((((systemVorlauf - systemRuecklauf) / Log((systemVorlauf - systemTemperatur) / (systemRuecklauf - systemTemperatur))) / ((normVorlauf - normRuecklauf) / Log((normVorlauf - normTemperatur) / (normRuecklauf - normTemperatur)))) ^ hkExp) etwas augenfreundlicher: Mit dieser Formel l√§sst sich die W√§rmeleistung eines Heizk√∂rpers von der Normvorgabe auf eine andere Zielvorgabe umrechnen. Dabei stehen die Platzhalter f√ºr folgende Angaben: systemVorlauf: Wunsch-Vorlauf systemRuecklauf: Wunsch-R√ºcklauf systemTemperatur: Wunsch-Raumtemperatur normVorlauf: Vorlauf gem√§√ü Herstellerangabe normRuecklauf: R√ºcklauf gem√§√ü Herstellerangabe normTemperatur: Raumtemperatur gem√§√ü Herstellerangabe normLeistung: Leistung gem√§√ü Herstellerangabe UmrechnungHeizkoerper: Ergebnis der Berechnung hkExp: Heizk√∂rperexponent, hier: 1,3 f√ºr Plattenheizk√∂rper Im folgenden Beispiel soll die Formel angewandt werden: Die Leistung des Heizk√∂rpers von oben (3000W Leistung bei 70¬∞C Vorlauf, 55¬∞C R√ºcklauf, 20¬∞C Raumtemperatur) soll f√ºr 45¬∞C Vorlauf und 35¬∞C bei der gleichen Raumtemperatur berechnet werden - vielleicht k√∂nnen wir die Vorlauftemperatur ja noch weiter reduzieren? Bei 45¬∞C Vorlauf liefert unser Heizk√∂rper nur noch 1110W Leistung Laut Berechnung w√ºrde die Heizleistung des Heizk√∂rpers also sogar bei nur 45¬∞C Vorlauf noch ausreichen um die Heizlast von 1049W zu decken. Aber gebt euch keinen Illusionen hin: Das Beispiel ist fiktiv - dass der Vorlauf noch deutlich unter 50¬∞C gesenkt werden kann d√ºrfte f√ºr Altbauten mit Plattenheizk√∂rpern eher die Ausnahme sein, zumal hier auch nur ein Heizk√∂rper die entsprechende Reserve hat - die gleiche Berechnung m√ºsste ja nun f√ºr alle anderen Heizk√∂rper des Hauses auch wiederholt werden. Zu beachten: Zumindest im Schlafbereich kann in der Regel von reduzierten Raumtemperaturen ausgegangen werden: Das kommt der Leistung des Heizk√∂rpers zu gute. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizung/:3:0","tags":null,"title":"Heizlastberechnung - Teil 3: Eignen sich meine Heizk√∂rper f√ºr eine W√§rmepumpe?","uri":"/posts/2022-10-29-heizung/"},{"categories":null,"content":"Was wenn die Leistung einzelner oder mehrerer Heizk√∂rper nicht ausreicht? Grunds√§tzlich kosten Heizk√∂rper nicht die Welt: Es ist denkbar - und nicht un√ºblich - dass im Rahmen des Einbaus einer W√§rmepumpe auch einzelne oder mehrere Heizk√∂rper ausgetauscht werden. Hier k√∂nnen wieder die oben bereits verlinkten Angaben zur W√§rmeleistung verschiedener Heizk√∂rpertypen konsultiert werden: Diesmal gewisserma√üen als R√ºckw√§rtssuche: Welcher Heizk√∂rper bietet die gesuchte W√§rmeleistung bei reduziertem Vorlauf? Im einfachsten Fall kann schlicht der n√§chstgr√∂√üere Typ gew√§hlt werden - also statt Typ 22 Typ 33 bei gleichen Ma√üen. So passt der neue Heizk√∂rper weiterhin an die alte Stelle. Auch der Einbau von Fu√übodenheizungen ist nat√ºrlich denkbar - aber deutlich aufw√§ndiger. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizung/:4:0","tags":null,"title":"Heizlastberechnung - Teil 3: Eignen sich meine Heizk√∂rper f√ºr eine W√§rmepumpe?","uri":"/posts/2022-10-29-heizung/"},{"categories":null,"content":"Fazit Die Ausgangsfrage dieser Reihe war: Wieviel Energie werde ich nach der D√§mmung der obersten Geschossdecke noch ben√∂tigen und eignet sich mein Altbau damit f√ºr eine W√§rmepumpe? Nun nenne ich noch keine W√§rmepumpe mein Eigen - √ºber die Heizlastberechnung konnte ich aber ermitteln, dass die D√§mmung der obersten Geschossdecke bis zu 40% Einsparung mit sich bringt - und ich damit bei der Heizlast je m¬≤ in durchaus interessante Bereiche f√ºr eine W√§rmepumpe gelange. Durch die Berechnung der Leistung der Heizk√∂rper konnte ich ferner ermitteln, dass diese auch bei 55¬∞C Vorlauf noch ausreichend Reserven haben, um das Haus im Winter auf Temperatur zu bringen. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizung/:5:0","tags":null,"title":"Heizlastberechnung - Teil 3: Eignen sich meine Heizk√∂rper f√ºr eine W√§rmepumpe?","uri":"/posts/2022-10-29-heizung/"},{"categories":null,"content":"Geht es ums Haus stolpert man immer wieder √ºber den U-Wert: S√§tze wie nach EnEV brauchste ‚Äônen U-Wert von 0,24 aber f√ºr KfW m√ºssen es schon 0,2 sein geh√∂ren zu den Standards√§tzen des stolzen Altbaubesitzers. Hier betrachte ich kurz, was es mit dem U-Wert auf sich hat, wo man relevante Informationen f√ºr sein Haus findet - und wie man die Auswirkung einer D√§mmung auf den U-Wert seines Hauses berechnen kann. ","date":"2022-10-29","objectID":"/posts/2022-10-29-uwert-ermitteln/:0:0","tags":null,"title":"Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermittelnn","uri":"/posts/2022-10-29-uwert-ermitteln/"},{"categories":null,"content":"Mehr zu dieser Reihe In diesem zweiten Teil meiner Reihe ‚ÄúHeizlastberechnung‚Äù geht es um einige Infos rund um den U-Wert. Wer sich generell f√ºr das Thema Heizlastberechnung interessiert, kann einen Blick auf die anderen Teile werfen. Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln Heizlastberechnung - Teil 2: U-Wert ermitteln Heizlastberechnung - Teil 3: Eignen sich meine Heizk√∂rper f√ºr eine W√§rmepumpe? ","date":"2022-10-29","objectID":"/posts/2022-10-29-uwert-ermitteln/:1:0","tags":null,"title":"Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermittelnn","uri":"/posts/2022-10-29-uwert-ermitteln/"},{"categories":null,"content":"Was ist der U-Wert? Der U-Wert wird auch W√§rmedurchgangskoeffizient genannt. Er beschreibt, wieviel W√§rme durch ein Bauteil dringen kann - also beispielsweise vom Wohnzimmer durch die Mauer nach drau√üen. Der U-Wert gibt an, wieviel W√§rme in Watt pro Quadratmeter entweicht - und zwar bei einem Temperaturunterschied von einem Grad Kelvin. Entsprechend wird der U-Wert in W/(m¬≤*K) angegeben - gesprochen ‚ÄúWatt pro Quadratmeter und pro Kelvin‚Äù. Je kleiner der U-Wert, desto weniger W√§rme gelangt nach au√üen - desto geringer unsere Heizkosten. Unged√§mmte Mauern und Decken oder alte Fenster k√∂nnen leicht einen U-Wert von 1 bis 3 W/(m¬≤K) haben. Dreifachverglaste Fenster gibt es heute mit einem U-Wert von bis zu 0,5 W/(m¬≤K), wer sein Dach d√§mmt und KfW-F√∂rderung ins Auge fasst wird auch dem U-Wert 0,14 W/(m¬≤*K) begegnen. Dem U-Wert kommt eine kritische Bedeutung bei der Heizlast eines Geb√§udes zu: Ein unged√§mmtes Dach mit dem U-Wert 2 W/(m¬≤*K) f√ºhrt bei einem 100m¬≤ gro√üen Haus und einer Norm-Auslegungstemperatur von -9¬∞C zu Transmissionsw√§rmeverlusten von 6.000 Watt. Bei 2100 Heizstunden lassen sich so √ºberschl√§gig 12kW Heizenergie darauf zur√ºckf√ºhren - je nach Kosten je kWh also 1200‚Ç¨ (bei 10ct je kWh) bis 2400 (20ct je kWh). ","date":"2022-10-29","objectID":"/posts/2022-10-29-uwert-ermitteln/:2:0","tags":null,"title":"Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermittelnn","uri":"/posts/2022-10-29-uwert-ermitteln/"},{"categories":null,"content":"Welchen U-Wert habe ich √ºberhaupt? Hier wollen wir uns besonders mit dem U-Wert im Kontext der Heizlastberechnung besch√§ftigen. Insofern lautet die Frage ja erstmal: Welchen U-Wert muss ich f√ºr meine Au√üenwand angeben? Welchen f√ºr mein Dach? Aufschluss gibt oft erstmal die Bauakte. Hier ist festgehalten, mit welchen Materialien W√§nde und Decken errichtet wurden. Hier wurde mit Bimshohlblocksteinen gebaut ","date":"2022-10-29","objectID":"/posts/2022-10-29-uwert-ermitteln/:3:0","tags":null,"title":"Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermittelnn","uri":"/posts/2022-10-29-uwert-ermitteln/"},{"categories":null,"content":"Beispielwandaufbau im Netz Im einfachsten Fall findet ihr Informationen zu so einem Wandaufbau im Netz: So gibt es beispielsweise ein Dokument des energie institut hessen in dem ‚ÄúU-Werte typischer Au√üenw√§nde‚Äù vorgestellt werden. Dort findet sich ein eigner Abschnitt ‚ÄúAu√üenw√§nde aus Bimshohlblocksteinen 30cm‚Äù. In einer detaillierten Tabelle wird genau ausgef√ºhrt, auf welchen U-Wert man √ºblicherweise kommt, werden zus√§tzlich W√§rme√ºbergangswerte, Putzschichten etc bedacht. Wandaufbau einer Au√üenwand gem√§√ü energie institut hessen Im obigen Fall hat die Wand also einen U-Wert von 1,23W/(m¬≤*K). ","date":"2022-10-29","objectID":"/posts/2022-10-29-uwert-ermitteln/:3:1","tags":null,"title":"Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermittelnn","uri":"/posts/2022-10-29-uwert-ermitteln/"},{"categories":null,"content":"Exkurs: U-Werte umrechnen und D√§mmung hinzuaddieren Nehmen wir nun an, die Wand wurde im Nachgang noch mit 14cm Styropor ged√§mmt. Zwar findet sich auch hierzu eine Information beim energie institut hessen: Bei 12cm D√§mmung k√§me man auf 0,24W/(m¬≤K). Wir wollen es aber genau f√ºr unsere 14cm D√§mmung. Kurze Google-Suche: Styropor hat einen Lambda-Wert von 0,035 W/mK. Um daraus den U-Wert zu berechnen nehmen wir den Kehrwert (1/0,035) um den W√§rmewiderstandswert zu erhalten. Diesen multiplizieren wir mit 0,14m - und bilden erneut den Kehrwert: 14cm Styropor haben demnach einen U-Wert von 0,25 W/(m¬≤K). Oder anders ausgedr√ºckt: 1/((1/0,035)*0,14) = 0,25 Wie berechnet man aber den U-Wert zweier verbundener Bauteile (Styropor + Wand)? Analog zu zuvor: Man addiert den W√§rmewiderstandswert der beiden Bauteile - also wieder den Kehrwert der U-Werte. Also: Kehrwert beider U-Werte addieren - und davon dann wieder den Kehrwert bilden: 1/(1/1,23 + 1/0,25) = 0,207 - der U-Wert meiner Au√üenwand betr√§gt (aufgerundet) 0,21 W/(m¬≤*K)\". ","date":"2022-10-29","objectID":"/posts/2022-10-29-uwert-ermitteln/:3:2","tags":null,"title":"Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermittelnn","uri":"/posts/2022-10-29-uwert-ermitteln/"},{"categories":null,"content":"Kompletten Wandaufbau selber berechnen Es gibt auch Tools im Netz die es erlauben, den kompletten Wandaufbau selber abzubilden. Mit beispielsweise ubakus.de k√∂nnen bequem verschiedene Baustoffe wie Ziegel, Putz und D√§mmung aus einem Katalog gew√§hlt werden. Wandaufbau mit ubakus.de, 30cm Hohlblockstein + 10cm Styropor Das Tool stellt den Wandaufbau schematisch dar, gibt den U-Wert aus und bietet dar√ºber hinaus auch viele weitere Informationen - wie Amortisationsrechner f√ºr D√§mmma√ünahmen, Hitzewiderstand etc pp. ","date":"2022-10-29","objectID":"/posts/2022-10-29-uwert-ermitteln/:3:3","tags":null,"title":"Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermittelnn","uri":"/posts/2022-10-29-uwert-ermitteln/"},{"categories":null,"content":"Energieberatung Wer ein Energiegutachten zu seinem Haus hat, kann dort ebenfalls relevante Informationen finden. Nicht immer wurde im Rahmen des Gutachtens zwangsl√§ufig auch eine Heizlastberechnung vorgenommen; insofern kann es schon vorkommen, dass man ein entsprechendes Gutachten sein Eigen nennt - und dennoch auf die Freude einer eigenen Heizlastberechnung nicht verzichten muss. Wandaufbau in einem Gutachten Wie unschwer zu erkennen ist, wird aber auch in machen Gutachten der Wandaufbau eher pauschaliert betrachtet: wer sich vorstellt, dass durch Hightech-Verfahren eine realit√§tsgetreue Abbildung des Wandaufbaus erzeugt wird, auf der die Berechnung dann fu√üt: Weit gefehlt. ","date":"2022-10-29","objectID":"/posts/2022-10-29-uwert-ermitteln/:3:4","tags":null,"title":"Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermittelnn","uri":"/posts/2022-10-29-uwert-ermitteln/"},{"categories":null,"content":"Weitere Tabellen bei bekannten Wandaufbauten Um sich gro√üe Rechnerei und Gutachten zu ersparen kann man auf noch generalistischere √úbersichtsseiten zur√ºckgreifen. In dieser √§lteren U-Wert √úbersicht zu Fassadend√§mmplatten von Caparol finden sich ebenfalls √ºbliche Wandbaustoffe und deren U-Werte ohne D√§mmung oder mit D√§mmung zwischen 6cm und 40cm. Schauen wir dort nach 30cm Hohlblocksteinen finden wir f√ºr verschiedene D√§mmstoffdicken folgende Angaben: 10cm Styropor: 0,28 W/(m¬≤*K) (der Wert der auch f√ºr 10cm Styropor bei ubakus.de berechnet wurde) 12cm Styropor: 0,24 W/(m¬≤*K) (der Wert der f√ºr 12cm Styropor auch bei energie institut hessen angegeben wurde) 14cm Styropor: 0,21 W/(m¬≤*K) (der Wert, den wir weiter oben f√ºr 14cm Styropor auch berechnet haben) Nach allen √úberlegungen zur Ermittlung des U-Wertes von Au√üenw√§nden halten wir also fest: Grobe √úbersichtstabellen erf√ºllen schon ihren Zweck, wenn man zumindest die Wandart und -st√§rke sowie ggf. die D√§mmung kennt. ","date":"2022-10-29","objectID":"/posts/2022-10-29-uwert-ermitteln/:3:5","tags":null,"title":"Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermittelnn","uri":"/posts/2022-10-29-uwert-ermitteln/"},{"categories":null,"content":"Pauschalwerte bei unbekannten Aufbauten Auch f√ºr andere Bauteile gibt es im Netz in aller Regel grobe Werte an denen man sich orientieren kann, sollte man in Bauakte \u0026 Co nicht f√ºndig werden. Gerade die Fenster im Haus k√∂nnen aus unterschiedlichen Baujahren in unterschiedlichen Qualit√§ten eingebaut worden sein. Grob lassen sich hier folgende Werte annehmen: Fenstertyp U-Wert in W/(m¬≤*K) Einfachverglasung 5,6 2-Scheiben Isolierglas 2,8 2-Scheiben W√§rmeschutzglas 1,0 - 1,2 3-Scheiben W√§rmeschutzglas 0,5 - 0,7 Beim Institut Wohnen und Umwelt findet sich dar√ºber hinaus eine umfassende Liste von Pauschalwerten f√ºr Bauteile wie Au√üenw√§nde (Tabelle 5), Geschossdecken (Tabelle 6), Dachschr√§gen (Tabelle 7), Fu√üb√∂den (Tabelle 8) und Fenster (Tabelle 9). Hier kommt man oft schon zum Ziel, wenn man das Baualter/Baujahr kennt und grob wei√ü ob die Wand/Decke aus Holz oder Beton besteht. ","date":"2022-10-29","objectID":"/posts/2022-10-29-uwert-ermitteln/:3:6","tags":null,"title":"Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermittelnn","uri":"/posts/2022-10-29-uwert-ermitteln/"},{"categories":null,"content":"Fazit Auch wer keine exakten Informationen zu den U-Werten seines Geb√§udes zur Hand hat, kann im Netz zumindest hinreichend gute Pauschalwerte finden, die sich zumindest f√ºr einen ersten Wurf einer Heizlastberechnung gut eignen. ","date":"2022-10-29","objectID":"/posts/2022-10-29-uwert-ermitteln/:4:0","tags":null,"title":"Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermittelnn","uri":"/posts/2022-10-29-uwert-ermitteln/"},{"categories":null,"content":"Energiekrise, Heizkostenentwicklung, Nachhaltigkeit: (Nicht nur) wer einen Altbau hat wird sich dieser Tage intensiv mit der Frage besch√§ftigen, wo man den Heizenergiebedarf des Hauses weiter optimieren kann und ob beispielsweise eine W√§rmepumpe in Frage kommt. Mit einer sogenannten Heizlastberechnung ist es m√∂glich, ein Modell des Heizenergiebedarfes eines Hauses zu entwickeln und zu verstehen, ob sich die vorhandenen Heizk√∂rper beispielsweise f√ºr eine W√§rmepumpe eignen. In meinem konkreten Fall lautet die Frage daher: Wieviel Energie werde ich nach der D√§mmung der obersten Geschossdecke noch ben√∂tigen und eignet sich mein Altbau damit f√ºr eine W√§rmepumpe? Im Laufe dieser Reihe soll diese Frage beantwortet werden; wir beginnen hier mit der Heizlastberechnung. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizlastberechnung/:0:0","tags":null,"title":"Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln","uri":"/posts/2022-10-29-heizlastberechnung/"},{"categories":null,"content":"Worum geht es? Hier wird eine Heizlastberechnung anhand eines 23m¬≤ gro√üen Raumes durchgef√ºhrt - und am Ende die Gesamtheizlast des Hausesauf Basis der Heizlasten weiterer R√§ume berechnet. Mit dem Ergebnis kann bspw. die Auslegung eines Heizkessels √ºberschl√§gig berechnen - oder absch√§tzen ob der 3kW Heizk√∂rper im Wohnzimmer auch bei Vorlauftemperaturen von 55¬∞C oder gar 45¬∞C noch ausreichend Leistung hat um den Raum zu erw√§rmen. Gerade letzteres ist oft kritisch um abzusch√§tzen, ob eine W√§rmepumpe bspw. rentabel ist. Im Rahmen dieser Reihe werden wir die Heizlast einzelner R√§ume berechnen, die Leistung von Heizk√∂rpern ermitteln und diese Leistung f√ºr geringere Vorlauftemperaturen umrechen. Im Bild zu sehen: In fast allen R√§umen ist die Leistung auch bei einer Vorlauftemperatur von 55¬∞C ausreichend - und in fast keinem Raum bei einer Vorlauftemperatur von 45¬∞C. Da dies eine mehrteilige Reihe ist empfehle ich auch folgende Lekt√ºre: Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln Heizlastberechnung - Teil 2: U-Wert von Bauteilen ermitteln Heizlastberechnung - Teil 3: Eignen sich meine Heizk√∂rper f√ºr eine W√§rmepumpe? ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizlastberechnung/:1:0","tags":null,"title":"Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln","uri":"/posts/2022-10-29-heizlastberechnung/"},{"categories":null,"content":"Ein Wort vorab Ich bin nicht vom Fach - alle Angaben sind falsch ;-). Mein Ziel ist es nicht, eine 100% akurate Ermittlung der Heizlast meines Hauses vorzunehmen (die Heizlastberechnung an sich ist ja schon nur ein Modell): Sondern die grundlegenden Konzepte soweit verinnertlicht zu haben, dass ich n√§herungsweise verstehen kann, wie sich bspw. die D√§mmung der ob ersten Geschossdecke auf meinen Heizw√§rmebedarf auswirkt. Was wir hier machen ist nach meinem Verst√§ndnis eine Interpretation der Norm DIN EN 12831-1: Energetische Bewertung von Geb√§uden - Verfahren zur Berechnung der Norm-Heizlast - Teil 1: Raumheizlast. Die Norm liegt mir nicht vor, und das Netz ist voller veralteter, falsch abgeschriebener und unvollst√§ndiger Informationen dazu, die ich nach besten Wissen und Gewissen neu arrangiere. Zu dieser Norm gibt es auch einen Teil 2: Heizungsanlagen in Geb√§uden - Verfahren zur Berechnung der Norm-Heizlast - Beiblatt 2: Vereinfachtes Verfahren zur Ermittlung der Geb√§ude-Heizlast und der W√§rmeerzeugerleistung Der nach meinem Verst√§ndnis nicht mehr aktuell ist und sich auf Verbrauchsmessungen und H√ºllfl√§chenberechnungen st√ºtzt. Beim IKZ: Magazin f√ºr Geb√§ude und Energietechnik wird die vereinfachte Berechnung am Beispiel durchgef√ºhrt. Weiterhin gibt es einen Teil 3: Energetische Bewertung von Geb√§uden - Verfahren zur Berechnung der Norm-Heizlast - Teil 3: Trinkwassererw√§rmungsanlagen, Heizlast und Bedarfsbestimmung Dieser befasst sich mit der Trinkwassererw√§rmung, die damit nicht Teil der hier geschilderten Heizlastberechnug ist. Hier kommt der Gesetzgeber mit einer Formel zur Hilfe: Quadratmeterzahl Haus * 32 * 1,1, die so in ¬ß9 der Heizkostenverordnung vorgeschlagen wird. In meinem Fall komme ich auf 110 * 32 * 1,1 = 3.872kWh/a was wiederum den 4.626 kWh/a aus einem Energiegutachten recht nahe kommen. Alternativ k√∂nnte man auch √ºberschl√§gig den Gasverbrauch eines Sommermonates (da ohne Heizw√§rme) mit 12 multiplizieren um auf den Jahresverbrauch zur Trinkwassererw√§rmung zu kommen; auch damit komme ich √ºberschl√§gig auf den Wert aus dem Energiegutachten. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizlastberechnung/:2:0","tags":null,"title":"Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln","uri":"/posts/2022-10-29-heizlastberechnung/"},{"categories":null,"content":"Wie setzt sich die Heizlast zusammen? Die Heizlast eines Raumes ist die Summe folgender W√§rmeverluste: Transmissionsw√§rmeverluste: Wieviel W√§rme verliert ein Raum durch Fenster, Decken und W√§nde nach au√üen oder in benachbarte R√§ume? L√ºftungsw√§rmeverluste: Wieviel W√§rme verliert ein Raum durch L√ºftung? Aufheizleistung: Wieviel W√§rme wird ben√∂tigt um den Raum nach Absenkung/Nichtbenutzung wieder auf Temperatur zu bringen Durch die Erhebung dieser Informationen und Aufsummierung aller R√§ume k√∂nnen wir die Heizlast f√ºr das gesamte Haus berechnen. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizlastberechnung/:3:0","tags":null,"title":"Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln","uri":"/posts/2022-10-29-heizlastberechnung/"},{"categories":null,"content":"Heizlastberechnung Im Folgenden berechnen wir die Heizlast f√ºr einen 23m¬≤ gro√üen Beispielraum. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizlastberechnung/:4:0","tags":null,"title":"Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln","uri":"/posts/2022-10-29-heizlastberechnung/"},{"categories":null,"content":"Transmissionsw√§rmeverluste Die Transmissionsw√§rmeverluste sind die W√§rmeverluste, die ein Raum durch W√§nde, Decken, B√∂den und Fenster zu anderen R√§umen hat. Aus Gr√ºnden der Einfachheit werden R√§ume mit gleichem Temperaturnivau in der Rechnung nicht ber√ºcksichtigt (die Wand vom Wohnzimmer zum Esszimmer muss also nicht separat ber√ºcksichtigt werden, da man davon ausgeht, dass die die W√§rmeverluste gegenseitig ausgleichen). Die Heizlast f√ºr alle genannten Bauteille wird dabei wie folgt berechnet: Fl√§che des Bauchteils * W√§rmedurchgangskoeffizient * Temperaturdifferenz Der W√§rmedurchgangskoeffizient ist der oft zitierte U-Wert. Er gibt an, wieviel Watt W√§rmeleistung je Quadratmeter und Grad Kelvin bspw. drau√üen verloren geht. Einige M√∂glichkeiten an diesen U-Wert zu gelangen sind in Heizlastberechnung - Teil 2: U-Wert ermitteln aufgef√ºhrt. Die Temperaturdifferenz ist hierbei die Temperaturdifferenz zwischen dem betrachteten Raum (bspw. 21¬∞C im Wohnzimmer) und dem angrenzenden Bereich (etwa 17¬∞C im Schlafzimmer). Achtung: F√ºr den Au√üenbereich wird die sogenannte Normauslegungstemperatur betrachtet. Diese l√§sst sich auf verschiedenen Webseiten nachschlagen, bspw. auf der Klimakarte des Bundesverbandes W√§rmepumpe e.V. Bei mir liegt die Normauslegungstemperatur -9¬∞C. Im Wohnzimmer heize ich auf 21¬∞C - die Temperaturdiffernz liegt damit bei 30¬∞K. Ein Beispiel: 6,58m¬≤ Fensterfl√§che mit einem U-Wert von 1,9 W/(m¬≤*K) bei einer Temperaturdifferenz von 30¬∞K: 6,58m¬≤ * 1,9 W/(m¬≤*K) * 30K = 375,06 W Der Temperaturverlust der Fensterfl√§che betr√§gt also 375,06 Watt. Wollen wir die Transmissionsw√§rmeverluste f√ºr unseren 23m¬≤ gro√üen Beispielraum berechnen, m√ºssen nat√ºrlich noch Decke, Boden, T√ºr zum Flur etc. betrachtet werden. Dies k√∂nnte bspw. wie folgt aussehen: Bauteil Fl√§che (m¬≤) U-Wert (W/m¬≤*K) Temperatur-Differenz (¬∞K) Verlust (W) Fenster 6,58 1,9 30 375,06 Au√üenwand 1,5 0,24 30 10,8 Rolladenkasten 1,57 1 30 47,1 Decke 23 0,14 11 35,42 Keller 23 1 11 253 T√ºr Flur 2,39 3 4 28,68 Summe 750,06 Die Transmissionsw√§rmeverluste des Beispielraumes betragen in Summe also rund 750 W. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizlastberechnung/:4:1","tags":null,"title":"Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln","uri":"/posts/2022-10-29-heizlastberechnung/"},{"categories":null,"content":"L√ºftungsw√§rmeverluste F√ºr ein gesundes Raumklima muss gel√ºftet werden, entweder h√§ndisch oder durch automatische L√ºftungsanlagen. Durch den Austausch der aufgeheizten, nassen Luft gegen kalte Luft sinkt die Luftfeuchtigkeit. Es wird aber auch W√§rmenergie abgegeben. Zur Berechnung stellt sich zun√§chst die Frage, wie oft die Raumluft je Stunde ausgetauscht wird (die sogenannte Luftwechselrate): Eine Luftwechselrate von 1 h^-1 bedeutet, dass das gesamte Raumvolumen einmal je Stunde ausgetauscht wird. Im Falle eines 23m¬≤ gro√üen Raumes mit 2,55m Deckenh√∂he also 23 * 2,55 * 1h^-1 = 58,65m¬≥/h Luft. Es gibt f√ºr unterschiedliche R√§ume unterschiedliche Angaben zu angestrebten Luftwechselramen - ein Badezimmer oder eine K√ºche wird man wegen der hohen Luftfeuchtigkeit sicher √∂fter/l√§nger l√ºften als ein Wohnzimmer. Zumindest f√ºr Standard-R√§ume scheint aber h√§ufig eine Luftwechselrate von 0,5 h^-1 angenommen zu werden: Im Schnitt wird dann das Raumvolumen an Luft alle zwei Stunden ausgetauscht. F√ºr unsere Rechnung ergibt sich damit ein Volumenstrom von 29,325m¬≥/h: 23m¬≤ * 2,55m * 0,5h^-1 = 29,325m¬≥/h. Um nun die L√ºftungsw√§rmeverluste zu berechnen, multiplizieren wir den berechneten Volumenstrom mit der spezifischen W√§rmekapazit√§t von Luft (0,34 Wh/(m¬≥*K)) und der Temperaturdifferenz: 29,32m¬≥/h * 30K * 0,34 Wh/(m¬≥*K) = 299,12 W Oder alles in einer Formel: Raumfl√§che * Raumh√∂he * Luftwechselrate * Temperaturdifferenz * W√§rmespeicherkapazit√§t_Luft Oder eben: 23m¬≤ * 2,55m * 0,5h^-1 * 30K * 0,34Wh/(m¬≥*K) = 299,12 W Der L√ºftungsw√§rmeverlust unseres Beispielraumes betr√§gt damit 299,12 W. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizlastberechnung/:4:2","tags":null,"title":"Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln","uri":"/posts/2022-10-29-heizlastberechnung/"},{"categories":null,"content":"Wiederaufheizleistung Die Wiederaufheizleistung gibt an, wie viel Leistung ben√∂tigt wird, wenn er nach Unterbrechung des Heizbetriebes (bspw. wg. Nachtabsenkung oder Nichtbenutzung) wieder aufgeheizt werden soll. Mein pers√∂nlicher Eindruck ist, dass dieser Wert h√§ufig eher unterschlagen wird, dazu finden sich vereinzelt auch Quellen: Meistens wird bei der Heizlastberechnung diese Aufheizleistung nicht ber√ºcksichtigt, weil dadurch die Leistung des W√§rmererzeugers und die Raumheizlasten und entsprechend die Heizfl√§chen f√ºr den ‚Äúnormalen Betrieb‚Äù zu gro√ü ausgelegt werden und sich die W√§rmeabgabe der Heizfl√§chen evtl. als Fremdw√§rme bemerkbar machen. Da aber zunehmend die Heizung f√ºr das gesamte Geb√§ude oder einige R√§ume zeitweise abgesenkt oder sogar total abgeschaltet werden, wird die Zusatzaufheizleistung wieder aktuell. Quelle: http://www.bosy-online.de/heizlastberechnung_nach_din_en_12831.htm Bei Geb√§ude Energieberater findet sich gar die Information, dass der Wiederaufheizfaktor mit der √úberarbeitung der Norm DIN EN 12831 ‚Äúnational auf 0 gesetzt‚Äù wurde - und damit die Wiederaufheizleistung pauschal immer mit 0W veranschlagt wird: Meistens wird die Heizlast zu hoch ermittelt. Jetzt wurde die Notbremse gezogen. Wegen der teilweise harschen Kritik, vor allem am Wiederaufheizfaktor, der bei W√§rmepumpen nicht sinnvoll anzuwenden ist und auch allgemein die Effizienz einer Anlage reduziert, wurde eine nationale Neuherausgabe des Beiblatts zur DIN EN 12831 eingeleitet. [‚Ä¶] Der Wiederaufheizfaktor wird national auf 0 gesetzt und im Vorwort der Begriff ‚ÄûNorm-Heizlast‚Äú definiert. Quelle: https://www.geb-info.de/neue-normen/neue-normen-heizlastberechnung-wird-ueberarbeitet F√ºr alle Interessierten, die den Wert dennoch berechnen m√∂chten: Die Aufheizleistung ist das Produkt aus der Grundfl√§che des Raumes in Quadratmetern und dem Wiederaufheizfaktor. Letzterer ber√ºcksichtigt Faktoren wie Geb√§udemasse, Luftwechselrate, gew√ºnschter Wiederaufheizzeit und Absenkzeit bzw. dem Temperaturabfall in der Absenkzeit. Der korrekte Wert l√§sst sich entsprechenden Tabellen entnehmen. Ein Beispiel: W√§hrend der Nachtabsenkung sinkt die Temperatur im 23m¬≤ gro√üen Raum um 3¬∞C, Fenster und T√ºren sind √ºber Nacht geschlossen. Die Geb√§udemasse ist schwer/mittelschwer, innerhalb von einer Stunde soll der Raum wieder warm sein: Gem√§√ü Tabelle betr√§gt der Wiederaufheizfaktor f√ºr diese Rahmenbedingungen 34 W/m¬≤. Damit wird die Aufheizleistung f√ºr unseren 23m¬≤ gro√üen Beispielraum mit 34 W/m¬≤ * 24m¬≤ = 787Wberechnet. Aus meiner Laiensicht kann die Wiederaufheizleistung zun√§chst auf 0W gesetzt werden; zum Abgleich mit den realen Verbr√§uchen kann die Wiederaufheizleistung dann feinjustiert werden, √ºber die jeweiligen Wiederaufheizfaktoren lassen sich dann Szenarien abbilden wie ‚ÄúB√ºro, von 17-8 Uhr unbeheizt‚Äù (h√∂herer Faktor) oder ‚ÄúWohnzimmer mit nur kleiner Au√üenwand und entsprechend geringem Temperaturabfall in der Nacht‚Äù (kleinerer Faktor). F√ºr unseren 23m¬≤ gro√üen Beispielraum notieren wir f√ºr die Wiederaufheizleistung damit 0 Watt. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizlastberechnung/:4:3","tags":null,"title":"Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln","uri":"/posts/2022-10-29-heizlastberechnung/"},{"categories":null,"content":"Die Summe der W√§rmeverluste unseres Beispielraumes Unser 23m¬≤ gro√üer Raum hat nun: Transmissionsw√§rmeverluste von 750 W L√ºftungsw√§rmeverluste 299,12 W Wiederaufheizleistung von 0 W In Summe also eine Heizlast von 1049,12 W. Die Heizlast wird in der Regel in Watt je m¬≤ angegeben - also 1049,12W / 23m¬≤ = 45,61 W/m¬≤ f√ºr unseren Beispielraum. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizlastberechnung/:4:4","tags":null,"title":"Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln","uri":"/posts/2022-10-29-heizlastberechnung/"},{"categories":null,"content":"Heizlastberechnung f√ºr das gesamte Haus Diese Heizlastberechnung k√∂nnen wir nun Raum f√ºr Raum wiederholen um so die Heizlast des gesamten Hauses zu ermitteln. Hier ein fiktives Beispiel mit dem Beispielraum von oben sowie weiteren Zimmern. Die Heizlasten je m¬≤ k√∂nnen stark variieren - beispielsweise weil ein Zimmer vielleicht noch alte Fenster hat oder an der Wetterseite des Hauses gelegen ist. Raum Heizlast (W) Heizlast je m¬≤ (W/m¬≤) Wohnzimmer 1049 46 K√ºche 400 60 Esszimmer 1000 100 Bad 300 55 Flur 600 50 Schlafzimmer 1 700 40 Schlafzimmer 2 800 60 B√ºro 500 70 Summe 5349 60 In Summe kommen wir also auf eine Heizlast von 5349 W - oder grob 60 W/m¬≤. Das w√§re in diesem Fall f√ºr einen Altbau schon ein recht guter Wert - auch hier gibt es einige Pauschalwerte die man zum Vergleich heranziehen kann - dabei wird immer die Heizlast je m¬≤ verglichen: Geb√§udetyp Heizlast W/m¬≤ Altbau 120 Altbau, teilged√§mmt 60-120 Neubau, W√§rmeschutzV ‚Äò95 40-60 Neubau, EnEV 2002 30-50 Passivh√§user 15 Weitere Pauschalwerte finden sich bspw. hier oder hier. Die Heizlast in W (hier: 5349 W) wird oft als grober Richtwert f√ºr den Heizkessel genutzt: In diesem Fall m√ºsste der Heizkessel also mindestens 5kW Leistung haben (gerade bei Altbauten liegen √ºbliche Werte (je nach Gr√∂√üe und D√§mmstandard) eher bei 10kW und mehr.) ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizlastberechnung/:5:0","tags":null,"title":"Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln","uri":"/posts/2022-10-29-heizlastberechnung/"},{"categories":null,"content":"Eine Faustformel: Heizlast und Heizw√§rmebedarf W√§hrend die Heizlast eine Kennzahl ist, die W√§rmeverluste und damit zusammenh√§ngend auch die Dimensionierung der Heizung bestimmt, gibt der Heizw√§rmebedarf dar√ºber Auskunft, wieviel Energie tats√§chlich ben√∂tigt wird - also bspw. den Brennstoffverbrauch an Gas. Hinweis: Berechnung nach DIN V 4108-6 Der Heizw√§rmebedarf wird f√ºr gew√∂hnlich nach DIN V 4108-6 √ºber eine eigene Formel berechnet: Heizw√§rmebedarf = [Gradtagsfaktor x (Transmissionsw√§rmeverlust + L√ºftungsw√§rmeverlust)] ‚Äì [Nutzungsgrad interner Gewinne x (solare Gewinne + interne Gewinne)] Zu beachten ist, dass die Berechnung der W√§rmeverluste in diesem Fall nicht anhand der Normauslegungstemperatur erfolgt (also bspw.-9¬∞C) - sondern anhand von Durchschnittstemperaturen f√ºr den betrachteten Zeitraum. Es handelt sich hierbei also nochmal um eine ganz andere Systematik. H√§ufig werden Heizlast und Heizw√§rmebedarf √ºber die sogenannte Volllaststunden mit einer Faustformel in Relation gestellt: So wird dann bspw. aus dem Gasverbrauch (=Heizw√§rmebedarf) die Heizlast √ºberschlagen. √úbliche Werte f√ºr Volllaststunden liegen bspw. um 2.100 f√ºr Einfamilienh√§user. In einem fiktiven Szenario mit 30.000 kWh Gasbedarf w√ºrde man so √ºberschlagen, dass etwas ein 14kW Heizkessel ben√∂tigt wird. Und ebenso k√∂nnen wir damit √ºberschlagen, dass unser fiktives Haus von oben mit einer Heizlast von 5.349kW etwa 11.233kWh Gas einkaufen m√ºsste. ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizlastberechnung/:6:0","tags":null,"title":"Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln","uri":"/posts/2022-10-29-heizlastberechnung/"},{"categories":null,"content":"Eignet sich mein Altbau f√ºr eine W√§rmepumpe? Zur√ºck zur Ursprungsfrage: Wieviel Energie werde ich nach der D√§mmung der obersten Geschossdecke noch ben√∂tigen und eignet sich mein Altbau damit f√ºr eine W√§rmepumpe? Den ersten Teil der Frage k√∂nnen wir bereits beantworten, durch die Heizlastberechnung kennen wir die Gesamtheizlast des Hauses und k√∂nnen sogar grob den Heizw√§rmebedarf √ºberschlagen. Hier lassen sich (beispielsweise mit Excel) auch sehr gut Zahlenspiele anstellen: Wie entwickelt sich meine Heizlast wenn ich‚Ä¶ ‚Ä¶alle Fenster gegen dreifachverglaste austausche? =\u003e In der Berechnung der Transmissionsw√§rmeverluste den U-Wert aller Fenster auf 0,9W/(m¬≤*K) setzen. ‚Ä¶die oberste Geschossdecke d√§mme? =\u003e In der Berechnung der Transmissionsw√§rmeverluste den U-Wert f√ºr das Dach auf 0,14W/(m¬≤*K) setzen. F√ºr den zweiten Teil der Frage m√∂chte ich noch herausfinden, ob die einzelnen Heizk√∂rper ausreichend gro√ü bemessen sind. Mehr dazu in Heizlastberechnung - Teil 3: Eignen sich meine Heizk√∂rper f√ºr eine W√§rmepumpe? ","date":"2022-10-29","objectID":"/posts/2022-10-29-heizlastberechnung/:7:0","tags":null,"title":"Heizlastberechnung - Teil 1: Heizlast eines Raumes und Hauses ermitteln","uri":"/posts/2022-10-29-heizlastberechnung/"},{"categories":null,"content":"Gasz√§hler mit ESP32 und einem QMC5883 Sensor automatisch auslesen","date":"2022-10-18","objectID":"/posts/2022-10-12-gaszaehler/","tags":null,"title":"Auf Irrwegen: Gasz√§hler automatisch auszulesen","uri":"/posts/2022-10-12-gaszaehler/"},{"categories":null,"content":"Smart Home und der mitleidige Blick meiner Ehefrau, wenn ich ihr mal wieder eine Automatisierung oder eine neue Sensor√ºberwachung pr√§sentiere: Diese beiden Sachen gehen Hand in Hand. Das war auch wieder bei diesem Projekt der Fall: Der automatischen √úberwachung des Gasz√§hlers. ","date":"2022-10-18","objectID":"/posts/2022-10-12-gaszaehler/:0:0","tags":null,"title":"Auf Irrwegen: Gasz√§hler automatisch auszulesen","uri":"/posts/2022-10-12-gaszaehler/"},{"categories":null,"content":"Warum das Ganze Ich erfasse immer schon monatlich unseren Strom- und Gasverbrauch. Bisher h√§ndisch: Einmal im Monat ein Foto von beiden Z√§hlern - und bei Zeiten dann in Excel eingepflegt. Fertig. Im Rahmen der D√§mmung unseres Hauses sowie der Heizlastberechnung wollte ich aber genauer verstehen, wie (schnell) sich der Erdgasverbauch entwickelt. Wie so oft: Das Ganze war doch komplizierter als gedacht. ","date":"2022-10-18","objectID":"/posts/2022-10-12-gaszaehler/:1:0","tags":null,"title":"Auf Irrwegen: Gasz√§hler automatisch auszulesen","uri":"/posts/2022-10-12-gaszaehler/"},{"categories":null,"content":"Das Grundprinzip In einigen Gasz√§hlern - so auch in meinem G4 RF1 - finden sich Magneten in einer Walze der Segmentanzeige. Positioniert man einen Reed-Kontakt an die richtige Position, kann dieser recht zuverl√§ssig detektieren, wenn sich die Walze beispielsweise von 9 nach 0 weiter dreht, weil dann eben auch der Magnet am Kontakt vorbeigef√ºhrt wird. Passende Kontakte / Sensoren gibt es direkt vom Hersteller - der l√§sst sich das mit 50-60‚Ç¨ aber auch gut verg√ºten. In solchen F√§llen ist ‚Äúselber machen‚Äù immer eine gute Option - und auch mindestens eine ebensogute Ausrede, den gleichen Betrag in Zubeh√∂r und Werkzeug zur Umsetzung des Projektes zu investieren ;-). In meinem Fall ist auf dem Gasz√§hler √ºbrigens vermerkt, dass 1 Impuls 0,1m¬≥ entspricht - demzufolge findet sich der Magnet auf der zweiten Walze nach dem Komma (eine volle Umdrehung der zweiten Nachkommastelle entspricht einem 1er-Inkrement der ersten Nachkommastelle). ","date":"2022-10-18","objectID":"/posts/2022-10-12-gaszaehler/:2:0","tags":null,"title":"Auf Irrwegen: Gasz√§hler automatisch auszulesen","uri":"/posts/2022-10-12-gaszaehler/"},{"categories":null,"content":"Versuch 1: Der Aqara T√ºr- und Fensterkontakt Im Netz finden sich verschiedene Berichte, dass ein Aqara T√ºr- und Fensterkontakt genutzt werden kann, um die Impulse zu messen. Diese L√∂sung w√§re nat√ºrlich besonders charmant, da ich (a) solche Kontakte ohnehin zu Hause habe, (b) die Sensoren sehr lange batteriebetrieben laufen und sie (c) sehr einfach √ºber Zigbee in das bestehende Hausautomatisierungssystem eingebunden werden k√∂nnen. Die Idee ist einfach: Sensor aus der Plastikh√ºlle befreien, an die richtige Stelle auf den Gasz√§hler platzieren - fertig‚Ä¶ ‚Ä¶oder auch nicht. Aquara T√ºr- und Fenstersensor im Auslieferungszustand Die untere Kappe des Kontaktes l√§sst sich leicht √∂ffnen Mit einem Messer l√§sst sich auch leicht der Rest zerst√∂rungsfrei √∂ffnen (anders als im Bild gezeigt ;-)) Der Sensor wird in die entsprechende Aufnahme platziert. Das Glasr√∂hrchen mit dem Reed-Kontakt sollte grob oberhalb der zweiten Nachkommastelle liegen, da sich in dieser Walze der Magnet befindet Kein Signal: Die n√§chsten Tage habe ich den Sensor in alle m√∂glichen und unm√∂glichen Positionen und Ausrichtungen an den Gasz√§hler geklebt. Ohne Erfolg Trotz aller Bem√ºhungen - und gut 10 abenteuerlichen Klebepositionen: Der Sensor erkennt den Magneten nicht, egal wie oft dieser im Betrieb am Sensor vor√ºber zieht. Das Problem ist bekannt - nicht jede Kombination aus Gasz√§hlerfabrikat und Aqara-Sensor scheint zu funktionieren. ","date":"2022-10-18","objectID":"/posts/2022-10-12-gaszaehler/:3:0","tags":null,"title":"Auf Irrwegen: Gasz√§hler automatisch auszulesen","uri":"/posts/2022-10-12-gaszaehler/"},{"categories":null,"content":"Versuch 2: IP Webcam Im n√§chsten Versuch sollte ein altes Handy als IP Webcam herhalten - ehrlicherweise nur um die Zeit zu √ºberbr√ºcken, bis das Zubeh√∂r f√ºr Versuch 3 eingetroffen ist. Mit einer entsprechenden App lassen sich alte Android Ger√§te relativ leicht als IP Webcam betreiben. Die App bietet umfangreiche Konfigurationsoptionen, letztlich ben√∂tige ich aber nur folgende Gegebenheiten: Bild l√§sst sich via URL auslesen LED-Licht l√§sst sich via HTTP-API ein- und abschalten So bekomme ich nun st√ºndlich einen aktuellen Z√§hlerstand via Telegram-Nachricht mitgeteilt - dank LED Licht auch in der Nacht gut lesbar. Nur aus Interesse habe ich versucht, die Bilder auch automatisiert auszuwerten - zumindest via SSOCR ist es mir aber nicht gelungen. W√ºrde man so etwas zum Laufen bringen wollen - ein Blick auf AI on the edge w√§re sicher lohnenswert: Dort werden Wasserz√§hler mittels ESP32 und einem neuronalem Netzwerk ausgelesen. Entsprechende Trainingsdaten inklusive‚Ä¶ Ein ausgemustertes Handy √ºberwacht den Gasz√§hler Der Versuch die Bilder automatisch zu verarbeiten‚Ä¶ scheitert aber: SSOCR erkennt maximal 3 Ziffern Wenn es schon mit der automatischen Auswertung nicht klappt: Dieses Blockly schickt st√ºndlich‚Ä¶ ‚Ä¶Telegram-Nachrichten mit dem aktuellen Z√§hlerstand ü•¥ Eine Erkenntnis ist aber: Alte Handys lassen sich doch sehr gut als IP Webcam umfunktionieren: Bewegungserkennung, Zwei-Wege-Kommunikation, LED-Licht, Video, Automatische Aufnahmen‚Ä¶ alles m√∂glich. ","date":"2022-10-18","objectID":"/posts/2022-10-12-gaszaehler/:4:0","tags":null,"title":"Auf Irrwegen: Gasz√§hler automatisch auszulesen","uri":"/posts/2022-10-12-gaszaehler/"},{"categories":null,"content":"Versuch 3: Kompass Nachdem klar war, dass der Sensor des Aqara-Kontaktes nicht fein genug ist, um den Magneten zu registrieren, habe ich nach Alternativen geschaut. Die Optionen: Reed-Kontakt Hall-Sensor Kompass/Magnetometer Nachdem ich mit dem Reed-Kontakt im Aqara-Sensor schon auf die Nase gefallen war, habe ich zun√§chst in Richtung Hall-Sensor √ºberlegt. Auch hier finden sich aber unterschiedliche Berichte, welcher Sensor f√ºr diesen Zweck jetzt empflindlich genug ist. Zu guter Letzt habe ich aber ein Projekt gefunden, wo ein Magnetometer HMC5883 mit Raspberry Pi die Aufgabe √ºbernimmt. Die √úberlegung, dass ein Sensor, der das Erdmagnetfelt detektieren kann, auch den Magneten im Gasz√§hler detektieren k√∂nnen sollte, fand ich plausibel. Der Sensor QMC5883 wird mit Stifleisten versehen Nachdem ich den ersten Sensor beim Anl√∂ten der Stiftleisten frittiert hatte und die Ersatzlieferung eingetroffen war, konnte das Projekt umgesetzt werden. Material: ESP32 Microprozessor QMC5833 Kompass Breadboard Jumperkabel Werkzeug: L√∂tkolben Die Idee: Der ESP32 w√§hlt sich ins Wifi ein und √ºbermittelt die Impulse via MQTT an meine Iobroker-Instanz, wo bei jedem Impuls der Z√§hlerstand um 0,1m¬≥ erh√∂ht wird. Springt die zweite Nachkommastelle von 6 auf 7 (rechts im Video), erkennt der Kompass einen starken Ausschlag (links im Video). So lassen sich wiederum Inkremente der ersten Nachkommastelle detektieren Nachdem die grundlegende Funktionsweise sichergestellt wurde (etwas Malerkrepp h√§lt den Sensor an Ort und Stelle), habe ich noch einen kleinen Halter 3d-gedruckt, dessen Modell auf Thingiverse abrufbar ist: https://www.thingiverse.com/thing:5581975 Mittels eines 3d-gedruckten Halters wird der Sensor genau √ºber die zweite Nachkommastelle der Segmentanzeige positioniert. Das Modell in der Rundumansicht Das Sketch f√ºr das Projekt ist relativ simpel: Im Wesentlichen werden 10 Sekunden lang Messwerte des Magnetfeldes gesammelt. Da der Sensor relativ empfindlich ist und die Werte bei Erkennung des Magneten √ºberlaufen k√∂nnen, wird die Signalst√§rke auf 4000 beschr√§nkt. Ist der Durchschnittswert der letzten 10 Sekunden \u003e 2000, wird das high Flag gesetzt. Ist der Durchschnittswert der letzten 10 Sekunden kleiner 300 und das High-Flag ist gesetzt, wurde eine Rotation erkannt, das high Flag wird entfernt und das Ganze via MQTT publiziert. Die Erkennung basiert also auf Anstieg und anschlie√üendem Fall der gemessenen Feldst√§rke. Dieses Vorgehen erscheint mir relativ robust, weil es wenig Fehlausl√∂sungen gibt - selbst wenn der Magnet l√§ngere Zeit direkt unter dem Sensor stehen bleibt. Das w√§re anders, wenn der Trigger f√ºr high und der Trigger f√ºr low identisch w√§ren - bei ung√ºnstiger Positionierung des Magneten k√∂nnte der Sensor zwischen den Ausl√∂sewerten hin- und herspringen. void loop() { loopMqtt(); sVector_t mag = compass.readRaw(); // calculate field strength \u0026 store for average calculation fieldStrength = sqrt(mag.XAxis ^ 2 + mag.YAxis ^ 2 + mag.ZAxis ^ 2); avg = avgFieldStrength.reading(fieldStrength \u003e 4000 ? 4000 : fieldStrength); Serial.print(\"Arrow: \"); Serial.println(fieldStrength); // every 10 seconds: evaluate if signall falls from high (magnet detected) to low (no magnet) if ((unsigned long)(millis() - timer) \u003e 10000) { if (avg \u003c 300 and isHigh) { isHigh = false; client.publish(\"mqtt.0.gas_meter.tick\", itoa(millis(), charBuf, 10)); } if (avg \u003e 2000) { isHigh = true; } timer = millis(); } delay(500); } Das komplette Skript findet sich auf Github. ","date":"2022-10-18","objectID":"/posts/2022-10-12-gaszaehler/:5:0","tags":null,"title":"Auf Irrwegen: Gasz√§hler automatisch auszulesen","uri":"/posts/2022-10-12-gaszaehler/"},{"categories":null,"content":"Fazit Insgesamt bin ich ziemlich zufrieden mit dem Ergebnis: Nach etwas Feinjustierung gibt es auch √ºber mehrere Tage keine Abweichung, der erfasste Z√§hlerstand entspricht (bis auf die erste Nachkommastelle) genau dem tats√§chlichen Z√§hlerstand. Und via Iobroker/Jarvis kann ich den Tagesverbauch auch sehr leicht graphisch visualisieren lassen. Nach 24 Stunden hat der Sensor alle 16 Ticks korrekt erfasst ","date":"2022-10-18","objectID":"/posts/2022-10-12-gaszaehler/:6:0","tags":null,"title":"Auf Irrwegen: Gasz√§hler automatisch auszulesen","uri":"/posts/2022-10-12-gaszaehler/"},{"categories":null,"content":" Moin üëã, I‚Äôm Daniel and I‚Äôve been involved with computer stuff for 25 years and more. This page serves to record some of these things in the hope that they are useful; and even more in the hope that I can quickly find them again when I need them. More information is available at the usual places: ","date":"2022-10-09","objectID":"/about/:0:0","tags":null,"title":"About","uri":"/about/"},{"categories":null,"content":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Endlich ist es soweit: 9,75kwp Photovoltaik schimmern im Sonnenlicht auf dem Dach - mit Wechselrichter und Speicher von Sungrow. Die n√ºtzliche App des Anbieters mit all ihren Analysem√∂glichkeiten kann aber nur kurz den Wunsch nach einem direkteren Zugriff auf die Daten zwecks Einbindung in die Hausautomatisierung stillen. Nach einigem Experimentieren funktioniert der Zugriff nun - die Erfahrung m√∂chte ich teilen. ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:0:0","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Kurze Einf√ºhrung √úber die Modbus-Schnittstelle des Wechselrichters k√∂nnen verschiedene Daten der Photovoltaik-Anlage ermittelt werden, wie beispielsweise: Ertrag der Anlage (Momentan und Tagessumme) Eigenbedarf (Momentan und Tagessumme) Einspeisung/Bezug ins/aus dem Netz (Momentan und Tagessumme) Lade- und Entladestrom der Batterie (Momentan und Tagessumme) Verschiedene Monatswerte Spannung und Strom der Strings Ladestand der Anlage Aktuell lese ich etwa 100 Werte aus - davon werden nat√ºrlich nicht alle ben√∂tigt. Grunds√§tzlich ist der Modbus-Standard unabh√§ngig von der eingesetzten Hausautomatisierungsl√∂sung - ich nutze in meinem Fall Iobroker, auch mit anderen Tools und Skripten lassen sich die Daten bei Bedarf verarbeiten. ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:1:0","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Einrichtung ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:2:0","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Verbindung Beim Standard ‚ÄúModbus √ºber TCP‚Äù kann das Modbus-Ger√§t (hier: der Wechselrichter) einfach √ºber das Heimnetz verbunden werden. Sungrow bietet f√ºr die hier beschriebenen Wechselrichter unterschiedliche Arten der Verbindung an: LAN-Verbindung direkt am Wechselrichter LAN-Verbindung via WiNet-S Dongle Wifi-Verbindung via WiNet-S Dongle Gem√§√ü verschiedenen Foren-Berichten, die auf den Sungrow-Support verweisen, sowie meiner eigenen Erfahrung ist eine Modbus-Verbindung NUR via LAN-Anschluss direkt am Wechselrichter m√∂glich. Der Wechselrichter wird also direkt via LAN-Kabel mit dem Router/Switch im Heimnetz verbunden. ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:2:1","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Installation in IoBroker Installiere den Modbus-Adapter in IoBroker indem ihr im Reiter Instanzen nach Modbus sucht und den Adapter installiert. ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:2:2","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Verbindungseinstellungen Unter Instanzen-\u003eModbus kann der Adapter nun konfiguriert werden. Im Tab Allgemein werden folgende Daten hinterlegt: Partner IP-Adresse: IP eures Sungrow WRs Port: 502 Ger√§te ID: 1, ggf. abweichend Typ: Master Aliases benutzen: Deaktivieren / Nein ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:2:3","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Eingangsregister Die vom Wechselrichter bereitgestellten Informationen m√ºssen aus sog. Registern ausgelesen werden. F√ºr die Anbindung m√ºssen neben Adresse und Datentyp auch L√§nge und Faktor hinterlegt sein, idealerweise auch Einheit und eine kurze Beschreibung zur sp√§teren Identifikation. Da das h√§ndische Hinterlegen der Register nicht praktikabel ist, k√∂nnen diese auch importiert werden. √úber den Doppelpfeil (zweites Icon von links auf der linken Seite) k√∂nnen die Register als TSV (Tab seperated Value) hinterlegt werden. Ein TSV mit den Registern ist hier zu finden. Dort auf ‚ÄúRaw‚Äù klicken um zum TSV zu gelangen. Nach dem Einrichten kann die Konfiguration gespeichert werden. ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:2:4","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Pr√ºfen Im Navigationsbaum kann nun Objekte ge√∂ffnet werden. Unter modbus.0.inputRegisters sollten sich nun die Datenpunkte finden. Hier sollte recht schnell ersichtlich werden, ob die Verbindung funktioniert, bspw. anhand der Register 13001 (PV Erzeugung heute) oder 13007 (Wirkleistung). Sind hier keine oder falsche Werte zu sehen, gibt es Probleme mit der Verbindung. Unter Protokoll in der Navigation finden sich weitere Informationen dazu. ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:2:5","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Fehlerbehandlung Die Modbus-Verbindung des Wechselrichters erscheint teilweise etwas fragil. Im Iobroker-Forum gibt es viele Berichte von Verbindungsproblemen aller Art. Im Folgenden ein paar Tipps dazu: ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:3:0","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Fehleranalyse mit modbus-cli Um zu pr√ºfen ob zumindest die Verbindung zum Wechselrichter funktioniert, k√∂nnen Modbus Tools wie bspw. Modbus-CLI genutzt werden. Ein einfaches Beispiel: daniel@laptop ~ % modbus 192.168.1.123:502 -s 1 4999 192.168.1.123: Durch deine IP ersetzen 502: Modbus Port am WR, idR 502 -s 1: Eure ClientID, idR 1 oder 100 4999: Das Register das ausgelesen werden soll Das Ergebnis sollte nun wie folgt aussehen Parsed 0 registers definitions from 1 files 4999: 2022 0x7e6 Interpretation der R√ºckgabe: 4999: Das ausgelesene Register 2022: Der Wert in dezimal. Hier: Das aktuelle Jahr 2022 0x7e6: Der Wer in hexadezimal. Anstatt des Register 4999 k√∂nnen nat√ºrlich auch beliebige andere Register ausgelesen werden. Aber Achtung: Die Erfahrung zeigt, dass es gerade mit diesem Tool nicht immer leicht ist, die richtigen Datentypen zu hinterlegen - selbst bei korrekter Verbindung kommen so fehlerhafte R√ºckgaben zu stande. Meine Empfehlung daher: Nutzt das Tool eher um sicherzustellen, dass die Verbindung funktioniert und haltet euch nicht damit auf, andere Werte auslesen zu wollen. ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:3:1","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Richtiges Ger√§t finden Antwortet der Einrichtungsassistent ist die IP-Adresse falsch In der Regel werdet ihr den Wechselrichter via WLAN-Stick mit dem Internet verbunden haben und zus√§tzlich √ºber den direkten Anschluss die Modbus-Verbindung vornehmen. Damit hat der Wechselrichter zwei IPs - einmal via WLAN und einmal via LAN. √úber beide IPs ist Modbus auch (theoretisch) erreichbar - ihr m√ºsst nun sicherstellen, dass ihr Modbus √ºber den LAN-Anschluss konfiguriert. Die korrekte IP kann bspw. √ºber Fritzbox gefunden werden: Dort lassen sich unter Heimnetz-\u003eNetzwerk alle Netzwerk-Ger√§te finden. Die Sungrow-Ger√§te haben in der Regel eine Mac-Adresse, die mit ‚ÄúAC‚Äù beginnt (Mac-Adressen ggf. √ºber den mit ‚Äú+/-‚Äù beschrifteten Button oben rechts anzeigen lassen). Weiterhin scheinen sich die Ger√§te als espressif-sungrow oder espressif zu identifizieren. Alternativ kann auch das Netzwerk recht einfach mit nmapnach Ger√§ten durchsucht werden, die auf Port 502 (Modbus) lauschen: daniel@rechner ~ % nmap -p502 --open 192.168.178.1/24 Starting Nmap 7.92 ( https://nmap.org ) at 2022-10-10 13:33 CEST Nmap scan report for espressif.fritz.box (192.168.178.85) Host is up (0.13s latency). PORT STATE SERVICE 502/tcp open mbap Nmap scan report for espressif-sungrow.fritz.box (192.168.178.89) Host is up (0.22s latency). PORT STATE SERVICE 502/tcp open mbap Nmap done: 256 IP addresses (24 hosts up) scanned in 49.12 seconds daniel@rechner ~ % Auch hier f√∂rdert der Scan zwei IPs zu Tage. Welche die richtige ist, offenbart ein einfacher Test: Ruft ihr die IP-Adresse im Browser auf und euch wird ein Setup-Assistent angezeigt, seit ihr mit dem WLAN-Stick verbunden - die IP ist also nicht die richtige f√ºr die Modbus-Verbindung. ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:3:2","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Verbindungsfehler Gef√ºrchtet sind Modbus-Fehler wie error: modbus.0 (21335) Client in error state. warn: modbus.0 (21335) Poll error count: 1 code: {\"err\":\"timeout\",\"timeout\":5000} oder in meinem Fall auch gerne On error: {\"errno\":-104,\"code\":\"ECONNRESET\",\"syscall\":\"read\"} im Iobroker-Protokoll. Eine genaue Ursache scheint nicht immer ersichtlich, empfohlen werden folgende Ma√ünahmen: Penible(!) Pr√ºfung der Konfiguration Sicherstellen dass die Read- und Write-Register keine Fehler enthalten (ggf. alle bis auf ein Register probeweise entfernen) Neuinstallation des Modbus-Adapters (Konfiguration, insb. Register vorher sichern / kopieren) Neustart Wechselrichter Aktualisierung Firmware Wechselrichter Umstecken das Kabels in anderen Switch-Port (in meinem Fall Zyxel, ggf. haben die vielen MODBUS Anfragen ein Limit gerissen?) =\u003e Hat reproduzierbar und mit sofortiger Wirkung zu einer Wiederherstellung der Verbindung gef√ºhrt ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:3:3","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Reduzierung von Abfrageintervallen und Registeranzahl Gerade wenn die Verbindung nach einigen Tagen abbricht und durch Wahl eines anderen LAN-Ports am Router/Switch wiederhergestellt werden kann, sollte gepr√ºft werden, ob nicht ggf. eine zu gro√üe Zahl an Registern in zu kurzer Zeit gelesen wird. M√∂gliche Abhilfe: Reduzierte Anzahl an Registern (Beispiel Gist / RAW) Reduzierte Anzahl an Lese- und Schreiboperationen im Modbus-Adapter durch Anpassung der Konfigirationen Leseinterval, Wartezeit ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:3:4","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Jetzt wird ausgelesen! Ist der WR korrekt in IoBroker eignebunden, ist die Freude zu n√§chst gro√ü. Register wie 5016 Total DC Power 13007 Load power 13009 Export power 13021 Battery power versprechen schnelle Erfolge. Allerdings stehen nicht alle Werte, die in der App ersichtlich sind, auch direkt zum Auslesen zur Verf√ºgung: Im obigen Bild ist bspw. ersichtlich, dass die Last des Hauses mit 83 W aus der PV-Anlage sowie 133 W aus dem Akku bedient wird. Weiterhin speist der Akku mit 2,003 kW ins Netz ein (es handelt sich hierbei um eine Kalibrierung des AKkus, ansonsten tritt der Fall nat√ºrlich nicht auf). Mit den Informationen in den o.g. Registern ist lediglich ersichtlich, dass 83 W PV-Strom erzeugt werden, die Batterie eine Last von 2,136 kW hat und ins Netz 2,003 kW eingespeist werden und im Haus eine Last von 216 W anf√§llt. Wie die Str√∂me sich genau verteilen ist √ºber die Register nicht ersichtlich. Um diese Information zu ermitteln werden die sog. ‚ÄúRunning States‚Äù ben√∂tigt. ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:4:0","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"13000_Running_State Im Register 13000 ‚ÄúRunning State‚Äù findet sich der aktuelle Betriebsstatus des Wechselrichters. Hierbei handelt es sich um eine Bitmaske die folgende Informationen kodiert: Bit0 PV power Bit0 == 0 No power generated from PV Bit0 == 1 Power generated from PV Bit1 Battery charging Bit1 == 0 Not charging Bit1 == 1 Charging Bit2 Battery discharging Bit2 == 0 Not discharging Bit2 == 1 Discharging Bit3 Positive load power Bit3 == 0 Load is reactive Bit3 == 1 Load is active Bit4 Feed-in power Bit4 == 0 No power feed-in the grid Bit4 == 1 Power feed-in the grid Bit5 Import Power from grid Bit5 == 0 No power imported from the grid Bit5 == 1 Importing power from grid Bit6 Reserved Bit6 Bit7 (Refitting System) Negative load power Bit7 == 0 No power generated from ‚ÄúLoad‚Äù Bit7== 1 Power generated from ‚ÄúLoad‚Äù Mit dieser Information ist es bspw. erst m√∂glich direkt zu ermitteln, ob die Batterie entl√§dt (Bit 3 ist 1) oder l√§dt (Bit 2 ist 1). Gleichzeitig kann hiermit ermittelt werden, ob bspw. gerade wirklich ins Netz eingespeist wird (Bit 4 ist 1) oder ob die in Register 13009 Export power verzeichnet 3 W nur ein Overshoot aus der Batterie sind (Bit 4 ist 0). Da die Bitmaske in IoBroker als Dezimalwert dargestellt wird (bspw. 25) kursieren einige Beispiele in denen auf diese Werte gepr√ºft wird. Korrekt ist es allerdings so nicht. Folgende JS Funktion kann in Blockly eingebunden werden um zu pr√ºfen, ob ein bestimmtes Bit gesetzt ist: function decToBit(dec, bitPosition) { return (dec \u0026 (1 \u003c\u003c bitPosition)) === 0 ? false : true; } Nun kann wie folgt gepr√ºft werden, ob die Batterie l√§dt oder entl√§dt: $runningState = getState(\"modbus.0.inputRegisters.13000_Running_State\").val; $batteryCharging = decToBit($runningState, 1); $batteryDischarging = decToBit($runningState, 2); ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:4:1","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Wohin flie√üt der Strom? Um mit dieser neuen Information tats√§chlich zu bestimmen, von wo nach wo der Strom flie√üt, sind weitere √úberlegungen n√∂tig. Hierzu l√§sst sich folgende Priorisierung aufstellen: PV Strom speist zun√§chst die Hauslast dann die Batterie Rest wird ins Netz eingespeist Strom aus der Batterie speist zun√§chst die Hauslast dann das Netz (bspw. Kalibrierung) Strom aus dem Netz speist zun√§chst die Hauslast dann die Batterie (bspw. Kalibrierung) Folgendes Javascript √ºbersetzt das Ganze in Code f√ºr IoBroker. function decToBit(dec, bitPosition) { return (dec \u0026 (1 \u003c\u003c bitPosition)) === 0 ? false : true; } // Creates a state if it does not exist yet function createStateIfNotExists(state, name) { if ( !existsState(state )) { createState(state, 0, false, {name: name, type: \"number\", role: 'value'}, function () {}); } } // Create states createStateIfNotExists(\"0_userdata.0.PV.PvToLoad\", \"Power from PV to load\"); createStateIfNotExists(\"0_userdata.0.PV.PvToBat\", \"Power from PV to bat\"); createStateIfNotExists(\"0_userdata.0.PV.PvToGrid\", \"Power from PV to grid\"); createStateIfNotExists(\"0_userdata.0.PV.BatToLoad\", \"Power from Bat to load\"); createStateIfNotExists(\"0_userdata.0.PV.BatToGrid\", \"Power from Bat to grid\"); createStateIfNotExists(\"0_userdata.0.PV.GridToLoad\", \"Power from grid to load\"); createStateIfNotExists(\"0_userdata.0.PV.GridToBat\", \"Power from Gridto battery\"); // Decode running state flags $powerGeneratedFromPV = decToBit(dec, 0); $batteryCharging = decToBit(dec, 1); $batteryDischarging = decToBit(dec, 2); $loadActive = decToBit(dec, 3); $powerFeedIntoGrid = decToBit(dec, 4); $powerImportFromGrid = decToBit(dec, 5); $powerGeneratedFromLoad = decToBit(dec, 7); // Save running state more speaking fields setState(\"0_userdata.0.PV.PowerGeneratedFromPV\", $powerGeneratedFromPV, true); setState(\"0_userdata.0.PV.BatteryCharging\", $batteryCharging, true); setState(\"0_userdata.0.PV.BatteryDischarging\", $batteryDischarging, true); setState(\"0_userdata.0.PV.LoadActive\", $loadActive, true); setState(\"0_userdata.0.PV.PowerFeedIntoGrid\", $powerFeedIntoGrid, true); setState(\"0_userdata.0.PV.PowerImportFromGrid\", $powerImportFromGrid, true); setState(\"0_userdata.0.PV.PowerGeneratedFromLoad\", $powerGeneratedFromLoad, true); // Read current power levels of bat, pv, load and grid $load = getState(\"modbus.0.inputRegisters.13007_Load_power_\").val; $grid = getState(\"modbus.0.inputRegisters.13009_Export_power\").val; $pv = getState(\"modbus.0.inputRegisters.5016_Total_DC_Power\").val; getState(\"modbus.0.inputRegisters.13021_Battery_power_\").val; // Calculate PV $pvToBat = 0; $pvToLoad = 0; $pvToGrid = 0; $loadRemaining = $load; if ($powerGeneratedFromPV) { $remaining = $pv; if ($remaining \u003e $loadRemaining) { $pvToLoad = $loadRemaining; $remaining -= $load; $loadRemaining = 0; } else { $pvToLoad = $remaining; $loadRemaining = $load - $remaining; $remaining = 0; } if ($batteryCharging) { if ($remaining \u003e $battery) { $pvToBat = $battery; $remaining -= $battery; } else { $pvToBat = $remaining; $remaining = 0; } } if ($grid \u003e 0) { $pvToGrid = $remaining; } } setState(\"0_userdata.0.PV.PvToLoad\", $pvToLoad); setState(\"0_userdata.0.PV.PvToBat\", $pvToBat); setState(\"0_userdata.0.PV.PvToGrid\", $pvToGrid); // Calculate Bat $batToLoad = 0; $batToGrid = 0; if ($batteryDischarging) { $remaining = $battery; if ($remaining \u003e $loadRemaining) { $batToLoad = $loadRemaining; $remaining -= $loadRemaining; $loadRemaining = 0; } else { $batToLoad = $remaining; $loadRemaining -= $remaining; $remaining = 0; } if ($powerFeedIntoGrid) { $batToGrid = $remaining; } } setState(\"0_userdata.0.PV.BatToLoad\", $batToLoad); setState(\"0_userdata.0.PV.BatToGrid\", $batToGrid); // Calculate grid $gridToBat = 0; $gridToLoad = 0; if ($grid \u003c 0) { $remaining = Math.abs($grid); if ($remaining \u003e $loadRemaining) { $gridToLoad = $loadRemaining; $remaining -= $loadRemaining; $loadRemaining = 0; } else { $gridToLoad = $remaining; $loadRemaining -= $remaining; $remaining = 0; } if (","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:4:2","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Regelverluste Auch wenn √ºber die Running States sehr klar ersichtlich ist, ob gerade ins Netz eingespeist oder der Akku geladen wird: Regelverluste (also bspw. kurzzeitge Einspeisungen aus dem Akku ins Netz, die entstehen weil die Last im Haus schneller abgefallen ist als der Akku abregeln konnte) werden √ºber die Running States nicht immer korrekt wiedergegeben. Insofern kann es sinnvoll sein davon auszugehen, dass die 30W, die vom Akku abgehen und nicht mehr zur Hauslast passen, eben doch ins Netz gehen - selbst wenn Bit 4 (power feed in) nicht gesetzt ist. ","date":"2022-10-09","objectID":"/posts/2022-10-09-sungrow/:4:3","tags":null,"title":"Sungrow Wechselrichter mit Modbus in Iobroker in Echtzeit auslesen","uri":"/posts/2022-10-09-sungrow/"},{"categories":null,"content":"Datenschutz Diese Datenschutzerkl√§rung soll die Nutzer der Webseite √ºber Art, Umfang und Zweck der erhobenen personenbezogenen Daten informieren. ","date":"0001-01-01","objectID":"/data-privacy/:1:0","tags":null,"title":"","uri":"/data-privacy/"},{"categories":null,"content":"Zugriffsdaten Beim Aufrufen von Seiten auf dieser Webseite werden automatisch Zugriffsdaten protokolliert (sog. Server-Logfiles). Dazu geh√∂ren: Besuchte Seiten Zeitpunkt des Zugriffs Gr√∂√üe der gesendeten Daten Quelle des Zugriffs (sog. Referer) Genutzter Browser Genutztes Betriebsystem IP Die so erhobenen Daten werden nach 7 Tage gel√∂scht. Die Erhebung dieser Daten ist unter anderem aus Sicherheitsgr√ºnden erforderlich um beispielsweise Angriffe auf die Webseite analysieren zu k√∂nnen. ","date":"0001-01-01","objectID":"/data-privacy/:1:1","tags":null,"title":"","uri":"/data-privacy/"},{"categories":null,"content":"Trackboxx Zur Reichweitenmessung der Seite wird der Service ‚ÄúTrackboxx‚Äù genutzt. Durch die Trackboxx-Dienste werden Daten, Eigenschaften und Aktivit√§ten von Nutzern im Hinblick auf die Nutzung von dieser Seite erfasst, verarbeitet oder gespeichert. Art der personenbezogenen Daten (gem. Art. 4 Nr. 1 DS-GVO): IP-Adresse (verschl√ºsselt/gek√ºrzt, f√ºr max. 24 Stunden) Pseudonyme Nutzer-ID (verschl√ºsselter Wert, der Schl√ºssel wird alle 24 Stunden ver√§ndert) Browserdaten: Art und Version des Browsers Art des Endger√§tes (Desktop, Tablet, Mobil) referenzierende Webseite Fl√ºchtige Daten wie Herkunftsland, Bildschirmaufl√∂sung, Zugriffszeitpunkt oder Zeitzone ","date":"0001-01-01","objectID":"/data-privacy/:1:2","tags":null,"title":"","uri":"/data-privacy/"},{"categories":null,"content":"Kontakt bei Fragen Bei Fragen zum Datenschutz auf dieser Seite wenden Sie sich gerne an mich: fragen-zum-datenschutz@post.noegelmail.de ","date":"0001-01-01","objectID":"/data-privacy/:1:3","tags":null,"title":"","uri":"/data-privacy/"},{"categories":null,"content":"Impressum ","date":"0001-01-01","objectID":"/imprint/:0:0","tags":null,"title":"","uri":"/imprint/"}]